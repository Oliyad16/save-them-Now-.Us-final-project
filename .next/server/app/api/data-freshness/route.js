"use strict";(()=>{var e={};e.id=432,e.ids=[432],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},14926:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>_,staticGenerationAsyncStorage:()=>m});var r={};t.r(r),t.d(r,{GET:()=>c});var a=t(49303),i=t(88716),o=t(60670),n=t(87070),u=t(92048),d=t(55315),p=t.n(d);async function c(){try{let e=p().join(process.cwd(),"missing-persons.csv"),s=p().join(process.cwd(),"database","app.db"),t=new Date,r={exists:!1,age_hours:1/0,status:"missing",last_modified:"",size_bytes:0},a={exists:!1,age_hours:1/0,status:"missing",last_modified:"",size_bytes:0};try{let s=await u.promises.stat(e),a=(t.getTime()-s.mtime.getTime())/36e5;r={exists:!0,age_hours:a,last_modified:s.mtime.toISOString(),size_bytes:s.size,status:a<24?"fresh":a<48?"stale":"very_stale"}}catch(e){}try{let e=await u.promises.stat(s),r=(t.getTime()-e.mtime.getTime())/36e5;a={exists:!0,age_hours:r,last_modified:e.mtime.toISOString(),size_bytes:e.size,status:r<30?"fresh":r<54?"stale":"very_stale"}}catch(e){}let i=r.exists&&a.exists&&"very_stale"!==r.status&&"very_stale"!==a.status?"stale"===r.status||"stale"===a.status?"warning":"ok":"critical",o=r.age_hours>24||!r.exists;return n.NextResponse.json({overall_status:i,update_needed:o,csv:r,database:a,checked_at:t.toISOString(),thresholds:{csv_warning_hours:24,csv_critical_hours:48,db_warning_hours:30,db_critical_hours:54}})}catch(e){return console.error("Error checking data freshness:",e),n.NextResponse.json({error:e instanceof Error?e.message:"Unknown error",overall_status:"error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/data-freshness/route",pathname:"/api/data-freshness",filename:"route",bundlePath:"app/api/data-freshness/route"},resolvedPagePath:"E:\\Download\\savethemnow.Jesus\\src\\app\\api\\data-freshness\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:_}=l,g="/api/data-freshness/route";function v(){return(0,o.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:m})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972],()=>t(14926));module.exports=r})();