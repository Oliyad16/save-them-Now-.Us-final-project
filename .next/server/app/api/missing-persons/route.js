"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/missing-persons/route";
exports.ids = ["app/api/missing-persons/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmissing-persons%2Froute&page=%2Fapi%2Fmissing-persons%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmissing-persons%2Froute.ts&appDir=E%3A%5CDownload%5Csavethemnow.Jesus%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDownload%5Csavethemnow.Jesus&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmissing-persons%2Froute&page=%2Fapi%2Fmissing-persons%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmissing-persons%2Froute.ts&appDir=E%3A%5CDownload%5Csavethemnow.Jesus%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDownload%5Csavethemnow.Jesus&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Download_savethemnow_Jesus_src_app_api_missing_persons_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/missing-persons/route.ts */ \"(rsc)/./src/app/api/missing-persons/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/missing-persons/route\",\n        pathname: \"/api/missing-persons\",\n        filename: \"route\",\n        bundlePath: \"app/api/missing-persons/route\"\n    },\n    resolvedPagePath: \"E:\\\\Download\\\\savethemnow.Jesus\\\\src\\\\app\\\\api\\\\missing-persons\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Download_savethemnow_Jesus_src_app_api_missing_persons_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/missing-persons/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtaXNzaW5nLXBlcnNvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1pc3NpbmctcGVyc29ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1pc3NpbmctcGVyc29ucyUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDRG93bmxvYWQlNUNzYXZldGhlbW5vdy5KZXN1cyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q0Rvd25sb2FkJTVDc2F2ZXRoZW1ub3cuSmVzdXMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2F2ZXRoZW1ub3ctamVzdXMvPzIzMzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRTpcXFxcRG93bmxvYWRcXFxcc2F2ZXRoZW1ub3cuSmVzdXNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbWlzc2luZy1wZXJzb25zXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9taXNzaW5nLXBlcnNvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9taXNzaW5nLXBlcnNvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL21pc3NpbmctcGVyc29ucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXERvd25sb2FkXFxcXHNhdmV0aGVtbm93Lkplc3VzXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG1pc3NpbmctcGVyc29uc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbWlzc2luZy1wZXJzb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmissing-persons%2Froute&page=%2Fapi%2Fmissing-persons%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmissing-persons%2Froute.ts&appDir=E%3A%5CDownload%5Csavethemnow.Jesus%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDownload%5Csavethemnow.Jesus&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/missing-persons/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/missing-persons/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_firestore_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firestore/services */ \"(rsc)/./src/lib/firestore/services.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var csv_parse_sync__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! csv-parse/sync */ \"(rsc)/./node_modules/csv-parse/lib/sync.js\");\n/* harmony import */ var _lib_geocoding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/geocoding */ \"(rsc)/./src/lib/geocoding.ts\");\n\n\n\n\n\n\n// Cache for geocoded locations (fallback to CSV if Firestore is empty)\nlet geocacheData = {};\n// Flag to track if we should fall back to CSV\nlet useFirestore = true;\nfunction parseAgeToInt(ageText) {\n    if (!ageText) return undefined;\n    const digits = ageText.replace(/\\D/g, \"\");\n    try {\n        return digits ? parseInt(digits) : undefined;\n    } catch  {\n        return undefined;\n    }\n}\nfunction mapRowToMissingPerson(row, index) {\n    const caseNumber = (row[\"Case Number\"] || \"\").toString().trim().replace(/\"/g, \"\");\n    const dlc = (row[\"DLC\"] || \"\").toString().trim();\n    const firstName = (row[\"Legal First Name\"] || \"\").toString().trim();\n    const lastName = (row[\"Legal Last Name\"] || \"\").toString().trim();\n    const city = (row[\"City\"] || \"\").toString().trim();\n    const state = (row[\"State\"] || \"\").toString().trim();\n    const county = (row[\"County\"] || \"\").toString().trim();\n    const ageText = (row[\"Missing Age\"] || \"\").toString().trim();\n    const sex = (row[\"Biological Sex\"] || \"\").toString().trim();\n    const ethnicity = (row[\"Race / Ethnicity\"] || \"\").toString().trim();\n    const age = parseAgeToInt(ageText);\n    const category = age !== undefined && age < 18 ? \"Missing Children\" : \"Missing Adults\";\n    // Check geocache for coordinates\n    const cacheKey = `${city},${state}`.toLowerCase();\n    let latitude;\n    let longitude;\n    if (geocacheData[cacheKey]) {\n        latitude = geocacheData[cacheKey].lat;\n        longitude = geocacheData[cacheKey].lon;\n    }\n    const location = [\n        city,\n        county,\n        state,\n        \"USA\"\n    ].filter(Boolean).join(\", \");\n    const fullName = [\n        firstName,\n        lastName\n    ].filter(Boolean).join(\" \");\n    return {\n        id: index + 1,\n        name: fullName,\n        date: dlc,\n        status: \"Active\",\n        category,\n        reportedMissing: `Reported Missing ${dlc}`,\n        location,\n        latitude,\n        longitude,\n        age,\n        gender: sex,\n        ethnicity,\n        caseNumber,\n        description: `Case #${caseNumber} - ${ageText} ${sex} from ${city}, ${state}`\n    };\n}\nasync function getFromFirestore(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        const limit = parseInt(searchParams.get(\"limit\") || \"100\");\n        const offset = parseInt(searchParams.get(\"offset\") || \"0\");\n        const category = searchParams.get(\"category\");\n        const search = searchParams.get(\"search\");\n        let result;\n        if (search) {\n            // Search functionality\n            const data = await _lib_firestore_services__WEBPACK_IMPORTED_MODULE_1__.missingPersonsService.search(search, {\n                limit,\n                offset\n            });\n            result = {\n                data: data.map((item)=>({\n                        id: item.id,\n                        name: item.name,\n                        date: item.dateMissing || item.dateReported,\n                        status: item.status,\n                        category: item.category,\n                        reportedMissing: `Reported Missing ${item.dateMissing || item.dateReported}`,\n                        location: item.location,\n                        latitude: item.latitude,\n                        longitude: item.longitude,\n                        age: item.age,\n                        gender: item.gender,\n                        ethnicity: item.ethnicity,\n                        caseNumber: item.caseNumber,\n                        description: item.description\n                    })),\n                meta: {\n                    total: data.length,\n                    limit,\n                    offset,\n                    hasMore: data.length === limit,\n                    source: \"firestore\"\n                }\n            };\n        } else if (category) {\n            // Category filtering\n            const data = await _lib_firestore_services__WEBPACK_IMPORTED_MODULE_1__.missingPersonsService.getByCategory(category, {\n                limit,\n                offset\n            });\n            result = {\n                data: data.map((item)=>({\n                        id: item.id,\n                        name: item.name,\n                        date: item.dateMissing || item.dateReported,\n                        status: item.status,\n                        category: item.category,\n                        reportedMissing: `Reported Missing ${item.dateMissing || item.dateReported}`,\n                        location: item.location,\n                        latitude: item.latitude,\n                        longitude: item.longitude,\n                        age: item.age,\n                        gender: item.gender,\n                        ethnicity: item.ethnicity,\n                        caseNumber: item.caseNumber,\n                        description: item.description\n                    })),\n                meta: {\n                    total: data.length,\n                    limit,\n                    offset,\n                    hasMore: data.length === limit,\n                    source: \"firestore\"\n                }\n            };\n        } else {\n            // Get all with pagination\n            const firestoreResult = await _lib_firestore_services__WEBPACK_IMPORTED_MODULE_1__.missingPersonsService.getAll({\n                limit,\n                offset\n            });\n            // Transform Firestore data to match expected MissingPerson interface\n            result = {\n                data: firestoreResult.data.map((item)=>({\n                        id: item.id,\n                        name: item.name,\n                        date: item.dateMissing || item.dateReported,\n                        status: item.status,\n                        category: item.category,\n                        reportedMissing: `Reported Missing ${item.dateMissing || item.dateReported}`,\n                        location: item.location,\n                        latitude: item.latitude,\n                        longitude: item.longitude,\n                        age: item.age,\n                        gender: item.gender,\n                        ethnicity: item.ethnicity,\n                        caseNumber: item.caseNumber,\n                        description: item.description\n                    })),\n                meta: {\n                    ...firestoreResult.meta,\n                    source: \"firestore\"\n                }\n            };\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"Firestore error:\", error);\n        // Don't throw - let the main function handle fallback\n        throw new Error(`Firestore failed: ${error.message}`);\n    }\n}\nasync function getFromCSV(request) {\n    // Load geocache if not already loaded\n    if (Object.keys(geocacheData).length === 0) {\n        geocacheData = await (0,_lib_geocoding__WEBPACK_IMPORTED_MODULE_5__.loadGeocache)();\n    }\n    const csvPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"missing-persons.csv\");\n    // Check if file exists\n    try {\n        await fs__WEBPACK_IMPORTED_MODULE_2__.promises.access(csvPath);\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"CSV file not found\"\n        }, {\n            status: 404\n        });\n    }\n    // Read and parse CSV\n    let csvContent = await fs__WEBPACK_IMPORTED_MODULE_2__.promises.readFile(csvPath, \"utf-8\");\n    // Remove BOM if present\n    if (csvContent.startsWith(\"\\uFEFF\")) {\n        csvContent = csvContent.slice(1);\n    }\n    const records = (0,csv_parse_sync__WEBPACK_IMPORTED_MODULE_4__.parse)(csvContent, {\n        columns: true,\n        skip_empty_lines: true,\n        trim: true\n    });\n    // Transform records to MissingPerson objects\n    const missingPersons = records.map((record, index)=>mapRowToMissingPerson(record, index));\n    // Apply pagination if requested\n    const searchParams = request.nextUrl.searchParams;\n    const limit = parseInt(searchParams.get(\"limit\") || \"100\");\n    const offset = parseInt(searchParams.get(\"offset\") || \"0\");\n    const paginatedResults = missingPersons.slice(offset, offset + limit);\n    // Add metadata about the full dataset\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        data: paginatedResults,\n        meta: {\n            total: missingPersons.length,\n            limit,\n            offset,\n            hasMore: offset + limit < missingPersons.length,\n            source: \"csv_fallback\"\n        }\n    });\n}\nasync function GET(request) {\n    try {\n        // Try Firestore first if enabled\n        if (useFirestore) {\n            try {\n                console.log(\"Attempting to fetch from Firestore...\");\n                return await getFromFirestore(request);\n            } catch (error) {\n                console.warn(\"Firestore failed, falling back to CSV:\", error.message);\n                // Disable Firestore for this session if it fails\n                useFirestore = false;\n            }\n        }\n        // Fallback to CSV\n        console.log(\"Using CSV fallback...\");\n        return await getFromCSV(request);\n    } catch (error) {\n        console.error(\"Error processing missing persons request:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch missing persons data\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST method for creating new missing person records (admin only)\nasync function POST(request) {\n    try {\n        // TODO: Add authentication check here\n        const body = await request.json();\n        if (!useFirestore) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"POST functionality requires Firestore to be available\"\n            }, {\n                status: 503\n            });\n        }\n        const result = await _lib_firestore_services__WEBPACK_IMPORTED_MODULE_1__.missingPersonsService.create({\n            caseNumber: body.caseNumber,\n            name: body.name,\n            age: body.age,\n            gender: body.gender,\n            ethnicity: body.ethnicity,\n            city: body.city,\n            county: body.county,\n            state: body.state,\n            location: body.location,\n            latitude: body.latitude,\n            longitude: body.longitude,\n            dateMissing: body.dateMissing,\n            dateReported: body.dateReported || body.dateMissing,\n            status: body.status || \"Active\",\n            category: body.category || (body.age && body.age < 18 ? \"Missing Children\" : \"Missing Adults\"),\n            description: body.description,\n            source: \"api_create\"\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating missing person:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create missing person\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9taXNzaW5nLXBlcnNvbnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNTO0FBQzdCO0FBQ1o7QUFDZTtBQUVRO0FBRTlDLHVFQUF1RTtBQUN2RSxJQUFJTyxlQUFpRixDQUFDO0FBRXRGLDhDQUE4QztBQUM5QyxJQUFJQyxlQUFlO0FBRW5CLFNBQVNDLGNBQWNDLE9BQWU7SUFDcEMsSUFBSSxDQUFDQSxTQUFTLE9BQU9DO0lBQ3JCLE1BQU1DLFNBQVNGLFFBQVFHLE9BQU8sQ0FBQyxPQUFPO0lBQ3RDLElBQUk7UUFDRixPQUFPRCxTQUFTRSxTQUFTRixVQUFVRDtJQUNyQyxFQUFFLE9BQU07UUFDTixPQUFPQTtJQUNUO0FBQ0Y7QUFFQSxTQUFTSSxzQkFBc0JDLEdBQVEsRUFBRUMsS0FBYTtJQUNwRCxNQUFNQyxhQUFhLENBQUNGLEdBQUcsQ0FBQyxjQUFjLElBQUksRUFBQyxFQUFHRyxRQUFRLEdBQUdDLElBQUksR0FBR1AsT0FBTyxDQUFDLE1BQU07SUFDOUUsTUFBTVEsTUFBTSxDQUFDTCxHQUFHLENBQUMsTUFBTSxJQUFJLEVBQUMsRUFBR0csUUFBUSxHQUFHQyxJQUFJO0lBQzlDLE1BQU1FLFlBQVksQ0FBQ04sR0FBRyxDQUFDLG1CQUFtQixJQUFJLEVBQUMsRUFBR0csUUFBUSxHQUFHQyxJQUFJO0lBQ2pFLE1BQU1HLFdBQVcsQ0FBQ1AsR0FBRyxDQUFDLGtCQUFrQixJQUFJLEVBQUMsRUFBR0csUUFBUSxHQUFHQyxJQUFJO0lBQy9ELE1BQU1JLE9BQU8sQ0FBQ1IsR0FBRyxDQUFDLE9BQU8sSUFBSSxFQUFDLEVBQUdHLFFBQVEsR0FBR0MsSUFBSTtJQUNoRCxNQUFNSyxRQUFRLENBQUNULEdBQUcsQ0FBQyxRQUFRLElBQUksRUFBQyxFQUFHRyxRQUFRLEdBQUdDLElBQUk7SUFDbEQsTUFBTU0sU0FBUyxDQUFDVixHQUFHLENBQUMsU0FBUyxJQUFJLEVBQUMsRUFBR0csUUFBUSxHQUFH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T3lFLEtBQUt6RSxLQUFLO1lBQ2pCWSxVQUFVNkQsS0FBSzdELFFBQVE7WUFDdkJKLFVBQVVpRSxLQUFLakUsUUFBUTtZQUN2QkMsV0FBV2dFLEtBQUtoRSxTQUFTO1lBQ3pCMkIsYUFBYXFDLEtBQUtyQyxXQUFXO1lBQzdCQyxjQUFjb0MsS0FBS3BDLFlBQVksSUFBSW9DLEtBQUtyQyxXQUFXO1lBQ25EaEIsUUFBUXFELEtBQUtyRCxNQUFNLElBQUk7WUFDdkJmLFVBQVVvRSxLQUFLcEUsUUFBUSxJQUFLb0UsQ0FBQUEsS0FBS3JFLEdBQUcsSUFBSXFFLEtBQUtyRSxHQUFHLEdBQUcsS0FBSyxxQkFBcUIsZ0JBQWU7WUFDNUZtQixhQUFha0QsS0FBS2xELFdBQVc7WUFDN0JtQixRQUFRO1FBQ1Y7UUFFQSxPQUFPbkUscURBQVlBLENBQUN1RSxJQUFJLENBQUNkLFFBQVE7WUFBRVosUUFBUTtRQUFJO0lBQ2pELEVBQUUsT0FBTzJCLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hELE9BQU94RSxxREFBWUEsQ0FBQ3VFLElBQUksQ0FDdEI7WUFBRUMsT0FBTztZQUFtQ3dCLFNBQVN4QixNQUFNRyxPQUFPO1FBQUMsR0FDbkU7WUFBRTlCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2F2ZXRoZW1ub3ctamVzdXMvLi9zcmMvYXBwL2FwaS9taXNzaW5nLXBlcnNvbnMvcm91dGUudHM/ZDIzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IG1pc3NpbmdQZXJzb25zU2VydmljZSB9IGZyb20gJ0AvbGliL2ZpcmVzdG9yZS9zZXJ2aWNlcydcclxuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcydcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICdjc3YtcGFyc2Uvc3luYydcclxuaW1wb3J0IHsgTWlzc2luZ1BlcnNvbiB9IGZyb20gJ0AvdHlwZXMvbWlzc2luZy1wZXJzb24nXHJcbmltcG9ydCB7IGxvYWRHZW9jYWNoZSB9IGZyb20gJ0AvbGliL2dlb2NvZGluZydcclxuXHJcbi8vIENhY2hlIGZvciBnZW9jb2RlZCBsb2NhdGlvbnMgKGZhbGxiYWNrIHRvIENTViBpZiBGaXJlc3RvcmUgaXMgZW1wdHkpXHJcbmxldCBnZW9jYWNoZURhdGE6IFJlY29yZDxzdHJpbmcsIHsgbGF0OiBudW1iZXI7IGxvbjogbnVtYmVyOyB0aW1lc3RhbXA/OiBudW1iZXIgfT4gPSB7fVxyXG5cclxuLy8gRmxhZyB0byB0cmFjayBpZiB3ZSBzaG91bGQgZmFsbCBiYWNrIHRvIENTVlxyXG5sZXQgdXNlRmlyZXN0b3JlID0gdHJ1ZVxyXG5cclxuZnVuY3Rpb24gcGFyc2VBZ2VUb0ludChhZ2VUZXh0OiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gIGlmICghYWdlVGV4dCkgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIGNvbnN0IGRpZ2l0cyA9IGFnZVRleHQucmVwbGFjZSgvXFxEL2csICcnKVxyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gZGlnaXRzID8gcGFyc2VJbnQoZGlnaXRzKSA6IHVuZGVmaW5lZFxyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFwUm93VG9NaXNzaW5nUGVyc29uKHJvdzogYW55LCBpbmRleDogbnVtYmVyKTogTWlzc2luZ1BlcnNvbiB7XHJcbiAgY29uc3QgY2FzZU51bWJlciA9IChyb3dbJ0Nhc2UgTnVtYmVyJ10gfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpLnJlcGxhY2UoL1wiL2csICcnKVxyXG4gIGNvbnN0IGRsYyA9IChyb3dbJ0RMQyddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gIGNvbnN0IGZpcnN0TmFtZSA9IChyb3dbJ0xlZ2FsIEZpcnN0IE5hbWUnXSB8fCAnJykudG9TdHJpbmcoKS50cmltKClcclxuICBjb25zdCBsYXN0TmFtZSA9IChyb3dbJ0xlZ2FsIExhc3QgTmFtZSddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gIGNvbnN0IGNpdHkgPSAocm93WydDaXR5J10gfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgY29uc3Qgc3RhdGUgPSAocm93WydTdGF0ZSddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gIGNvbnN0IGNvdW50eSA9IChyb3dbJ0NvdW50eSddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gIGNvbnN0IGFnZVRleHQgPSAocm93WydNaXNzaW5nIEFnZSddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG4gIGNvbnN0IHNleCA9IChyb3dbJ0Jpb2xvZ2ljYWwgU2V4J10gfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpXHJcbiAgY29uc3QgZXRobmljaXR5ID0gKHJvd1snUmFjZSAvIEV0aG5pY2l0eSddIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxyXG5cclxuICBjb25zdCBhZ2UgPSBwYXJzZUFnZVRvSW50KGFnZVRleHQpXHJcbiAgY29uc3QgY2F0ZWdvcnkgPSBhZ2UgIT09IHVuZGVmaW5lZCAmJiBhZ2UgPCAxOCA/ICdNaXNzaW5nIENoaWxkcmVuJyA6ICdNaXNzaW5nIEFkdWx0cydcclxuXHJcbiAgLy8gQ2hlY2sgZ2VvY2FjaGUgZm9yIGNvb3JkaW5hdGVzXHJcbiAgY29uc3QgY2FjaGVLZXkgPSBgJHtjaXR5fSwke3N0YXRlfWAudG9Mb3dlckNhc2UoKVxyXG4gIGxldCBsYXRpdHVkZTogbnVtYmVyIHwgdW5kZWZpbmVkXHJcbiAgbGV0IGxvbmdpdHVkZTogbnVtYmVyIHwgdW5kZWZpbmVkXHJcblxyXG4gIGlmIChnZW9jYWNoZURhdGFbY2FjaGVLZXldKSB7XHJcbiAgICBsYXRpdHVkZSA9IGdlb2NhY2hlRGF0YVtjYWNoZUtleV0ubGF0XHJcbiAgICBsb25naXR1ZGUgPSBnZW9jYWNoZURhdGFbY2FjaGVLZXldLmxvblxyXG4gIH1cclxuXHJcbiAgY29uc3QgbG9jYXRpb24gPSBbY2l0eSwgY291bnR5LCBzdGF0ZSwgJ1VTQSddLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpXHJcbiAgY29uc3QgZnVsbE5hbWUgPSBbZmlyc3ROYW1lLCBsYXN0TmFtZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGluZGV4ICsgMSxcclxuICAgIG5hbWU6IGZ1bGxOYW1lLFxyXG4gICAgZGF0ZTogZGxjLFxyXG4gICAgc3RhdHVzOiAnQWN0aXZlJyxcclxuICAgIGNhdGVnb3J5LFxyXG4gICAgcmVwb3J0ZWRNaXNzaW5nOiBgUmVwb3J0ZWQgTWlzc2luZyAke2RsY31gLFxyXG4gICAgbG9jYXRpb24sXHJcbiAgICBsYXRpdHVkZSxcclxuICAgIGxvbmdpdHVkZSxcclxuICAgIGFnZSxcclxuICAgIGdlbmRlcjogc2V4LFxyXG4gICAgZXRobmljaXR5LFxyXG4gICAgY2FzZU51bWJlcixcclxuICAgIGRlc2NyaXB0aW9uOiBgQ2FzZSAjJHtjYXNlTnVtYmVyfSAtICR7YWdlVGV4dH0gJHtzZXh9IGZyb20gJHtjaXR5fSwgJHtzdGF0ZX1gXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRGcm9tRmlyZXN0b3JlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXNcclxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMTAwJylcclxuICAgIGNvbnN0IG9mZnNldCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpIHx8ICcwJylcclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gc2VhcmNoUGFyYW1zLmdldCgnY2F0ZWdvcnknKVxyXG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJylcclxuXHJcbiAgICBsZXQgcmVzdWx0XHJcblxyXG4gICAgaWYgKHNlYXJjaCkge1xyXG4gICAgICAvLyBTZWFyY2ggZnVuY3Rpb25hbGl0eVxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgbWlzc2luZ1BlcnNvbnNTZXJ2aWNlLnNlYXJjaChzZWFyY2gsIHsgbGltaXQsIG9mZnNldCB9KVxyXG4gICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgZGF0YTogZGF0YS5tYXAoKGl0ZW06IGFueSkgPT4gKHtcclxuICAgICAgICAgIGlkOiBpdGVtLmlkLFxyXG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgZGF0ZTogaXRlbS5kYXRlTWlzc2luZyB8fCBpdGVtLmRhdGVSZXBvcnRlZCxcclxuICAgICAgICAgIHN0YXR1czogaXRlbS5zdGF0dXMsXHJcbiAgICAgICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSxcclxuICAgICAgICAgIHJlcG9ydGVkTWlzc2luZzogYFJlcG9ydGVkIE1pc3NpbmcgJHtpdGVtLmRhdGVNaXNzaW5nIHx8IGl0ZW0uZGF0ZVJlcG9ydGVkfWAsXHJcbiAgICAgICAgICBsb2NhdGlvbjogaXRlbS5sb2NhdGlvbixcclxuICAgICAgICAgIGxhdGl0dWRlOiBpdGVtLmxhdGl0dWRlLFxyXG4gICAgICAgICAgbG9uZ2l0dWRlOiBpdGVtLmxvbmdpdHVkZSxcclxuICAgICAgICAgIGFnZTogaXRlbS5hZ2UsXHJcbiAgICAgICAgICBnZW5kZXI6IGl0ZW0uZ2VuZGVyLFxyXG4gICAgICAgICAgZXRobmljaXR5OiBpdGVtLmV0aG5pY2l0eSxcclxuICAgICAgICAgIGNhc2VOdW1iZXI6IGl0ZW0uY2FzZU51bWJlcixcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgfSkpLFxyXG4gICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgIHRvdGFsOiBkYXRhLmxlbmd0aCxcclxuICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgaGFzTW9yZTogZGF0YS5sZW5ndGggPT09IGxpbWl0LFxyXG4gICAgICAgICAgc291cmNlOiAnZmlyZXN0b3JlJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAvLyBDYXRlZ29yeSBmaWx0ZXJpbmdcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG1pc3NpbmdQZXJzb25zU2VydmljZS5nZXRCeUNhdGVnb3J5KGNhdGVnb3J5LCB7IGxpbWl0LCBvZmZzZXQgfSlcclxuICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgIGRhdGE6IGRhdGEubWFwKChpdGVtOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgIGRhdGU6IGl0ZW0uZGF0ZU1pc3NpbmcgfHwgaXRlbS5kYXRlUmVwb3J0ZWQsXHJcbiAgICAgICAgICBzdGF0dXM6IGl0ZW0uc3RhdHVzLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksXHJcbiAgICAgICAgICByZXBvcnRlZE1pc3Npbmc6IGBSZXBvcnRlZCBNaXNzaW5nICR7aXRlbS5kYXRlTWlzc2luZyB8fCBpdGVtLmRhdGVSZXBvcnRlZH1gLFxyXG4gICAgICAgICAgbG9jYXRpb246IGl0ZW0ubG9jYXRpb24sXHJcbiAgICAgICAgICBsYXRpdHVkZTogaXRlbS5sYXRpdHVkZSxcclxuICAgICAgICAgIGxvbmdpdHVkZTogaXRlbS5sb25naXR1ZGUsXHJcbiAgICAgICAgICBhZ2U6IGl0ZW0uYWdlLFxyXG4gICAgICAgICAgZ2VuZGVyOiBpdGVtLmdlbmRlcixcclxuICAgICAgICAgIGV0aG5pY2l0eTogaXRlbS5ldGhuaWNpdHksXHJcbiAgICAgICAgICBjYXNlTnVtYmVyOiBpdGVtLmNhc2VOdW1iZXIsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvblxyXG4gICAgICAgIH0pKSxcclxuICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICB0b3RhbDogZGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICBsaW1pdCxcclxuICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgIGhhc01vcmU6IGRhdGEubGVuZ3RoID09PSBsaW1pdCxcclxuICAgICAgICAgIHNvdXJjZTogJ2ZpcmVzdG9yZSdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEdldCBhbGwgd2l0aCBwYWdpbmF0aW9uXHJcbiAgICAgIGNvbnN0IGZpcmVzdG9yZVJlc3VsdCA9IGF3YWl0IG1pc3NpbmdQZXJzb25zU2VydmljZS5nZXRBbGwoeyBsaW1pdCwgb2Zmc2V0IH0pXHJcbiAgICAgIFxyXG4gICAgICAvLyBUcmFuc2Zvcm0gRmlyZXN0b3JlIGRhdGEgdG8gbWF0Y2ggZXhwZWN0ZWQgTWlzc2luZ1BlcnNvbiBpbnRlcmZhY2VcclxuICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgIGRhdGE6IGZpcmVzdG9yZVJlc3VsdC5kYXRhLm1hcCgoaXRlbTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgICBkYXRlOiBpdGVtLmRhdGVNaXNzaW5nIHx8IGl0ZW0uZGF0ZVJlcG9ydGVkLFxyXG4gICAgICAgICAgc3RhdHVzOiBpdGVtLnN0YXR1cyxcclxuICAgICAgICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5LFxyXG4gICAgICAgICAgcmVwb3J0ZWRNaXNzaW5nOiBgUmVwb3J0ZWQgTWlzc2luZyAke2l0ZW0uZGF0ZU1pc3NpbmcgfHwgaXRlbS5kYXRlUmVwb3J0ZWR9YCxcclxuICAgICAgICAgIGxvY2F0aW9uOiBpdGVtLmxvY2F0aW9uLFxyXG4gICAgICAgICAgbGF0aXR1ZGU6IGl0ZW0ubGF0aXR1ZGUsXHJcbiAgICAgICAgICBsb25naXR1ZGU6IGl0ZW0ubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgYWdlOiBpdGVtLmFnZSxcclxuICAgICAgICAgIGdlbmRlcjogaXRlbS5nZW5kZXIsXHJcbiAgICAgICAgICBldGhuaWNpdHk6IGl0ZW0uZXRobmljaXR5LFxyXG4gICAgICAgICAgY2FzZU51bWJlcjogaXRlbS5jYXNlTnVtYmVyLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb25cclxuICAgICAgICB9KSksXHJcbiAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgLi4uZmlyZXN0b3JlUmVzdWx0Lm1ldGEsXHJcbiAgICAgICAgICBzb3VyY2U6ICdmaXJlc3RvcmUnXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdClcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGaXJlc3RvcmUgZXJyb3I6JywgZXJyb3IpXHJcbiAgICAvLyBEb24ndCB0aHJvdyAtIGxldCB0aGUgbWFpbiBmdW5jdGlvbiBoYW5kbGUgZmFsbGJhY2tcclxuICAgIHRocm93IG5ldyBFcnJvcihgRmlyZXN0b3JlIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRGcm9tQ1NWKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgLy8gTG9hZCBnZW9jYWNoZSBpZiBub3QgYWxyZWFkeSBsb2FkZWRcclxuICBpZiAoT2JqZWN0LmtleXMoZ2VvY2FjaGVEYXRhKS5sZW5ndGggPT09IDApIHtcclxuICAgIGdlb2NhY2hlRGF0YSA9IGF3YWl0IGxvYWRHZW9jYWNoZSgpXHJcbiAgfVxyXG5cclxuICBjb25zdCBjc3ZQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdtaXNzaW5nLXBlcnNvbnMuY3N2JylcclxuICBcclxuICAvLyBDaGVjayBpZiBmaWxlIGV4aXN0c1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBmcy5hY2Nlc3MoY3N2UGF0aClcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQ1NWIGZpbGUgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcbiAgfVxyXG5cclxuICAvLyBSZWFkIGFuZCBwYXJzZSBDU1ZcclxuICBsZXQgY3N2Q29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGNzdlBhdGgsICd1dGYtOCcpXHJcbiAgXHJcbiAgLy8gUmVtb3ZlIEJPTSBpZiBwcmVzZW50XHJcbiAgaWYgKGNzdkNvbnRlbnQuc3RhcnRzV2l0aCgnXFx1ZmVmZicpKSB7XHJcbiAgICBjc3ZDb250ZW50ID0gY3N2Q29udGVudC5zbGljZSgxKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVjb3JkcyA9IHBhcnNlKGNzdkNvbnRlbnQsIHtcclxuICAgIGNvbHVtbnM6IHRydWUsXHJcbiAgICBza2lwX2VtcHR5X2xpbmVzOiB0cnVlLFxyXG4gICAgdHJpbTogdHJ1ZVxyXG4gIH0pXHJcblxyXG4gIC8vIFRyYW5zZm9ybSByZWNvcmRzIHRvIE1pc3NpbmdQZXJzb24gb2JqZWN0c1xyXG4gIGNvbnN0IG1pc3NpbmdQZXJzb25zOiBNaXNzaW5nUGVyc29uW10gPSByZWNvcmRzLm1hcCgocmVjb3JkOiBhbnksIGluZGV4OiBudW1iZXIpID0+IFxyXG4gICAgbWFwUm93VG9NaXNzaW5nUGVyc29uKHJlY29yZCwgaW5kZXgpXHJcbiAgKVxyXG5cclxuICAvLyBBcHBseSBwYWdpbmF0aW9uIGlmIHJlcXVlc3RlZFxyXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXNcclxuICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzEwMCcpXHJcbiAgY29uc3Qgb2Zmc2V0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnb2Zmc2V0JykgfHwgJzAnKVxyXG5cclxuICBjb25zdCBwYWdpbmF0ZWRSZXN1bHRzID0gbWlzc2luZ1BlcnNvbnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdClcclxuXHJcbiAgLy8gQWRkIG1ldGFkYXRhIGFib3V0IHRoZSBmdWxsIGRhdGFzZXRcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgZGF0YTogcGFnaW5hdGVkUmVzdWx0cyxcclxuICAgIG1ldGE6IHtcclxuICAgICAgdG90YWw6IG1pc3NpbmdQZXJzb25zLmxlbmd0aCxcclxuICAgICAgbGltaXQsXHJcbiAgICAgIG9mZnNldCxcclxuICAgICAgaGFzTW9yZTogb2Zmc2V0ICsgbGltaXQgPCBtaXNzaW5nUGVyc29ucy5sZW5ndGgsXHJcbiAgICAgIHNvdXJjZTogJ2Nzdl9mYWxsYmFjaydcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSBGaXJlc3RvcmUgZmlyc3QgaWYgZW5hYmxlZFxyXG4gICAgaWYgKHVzZUZpcmVzdG9yZSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGZldGNoIGZyb20gRmlyZXN0b3JlLi4uJylcclxuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0RnJvbUZpcmVzdG9yZShyZXF1ZXN0KVxyXG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdGaXJlc3RvcmUgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gQ1NWOicsIGVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgLy8gRGlzYWJsZSBGaXJlc3RvcmUgZm9yIHRoaXMgc2Vzc2lvbiBpZiBpdCBmYWlsc1xyXG4gICAgICAgIHVzZUZpcmVzdG9yZSA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGYWxsYmFjayB0byBDU1ZcclxuICAgIGNvbnNvbGUubG9nKCdVc2luZyBDU1YgZmFsbGJhY2suLi4nKVxyXG4gICAgcmV0dXJuIGF3YWl0IGdldEZyb21DU1YocmVxdWVzdClcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBtaXNzaW5nIHBlcnNvbnMgcmVxdWVzdDonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBtaXNzaW5nIHBlcnNvbnMgZGF0YScsXHJcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcblxyXG4vLyBQT1NUIG1ldGhvZCBmb3IgY3JlYXRpbmcgbmV3IG1pc3NpbmcgcGVyc29uIHJlY29yZHMgKGFkbWluIG9ubHkpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRPRE86IEFkZCBhdXRoZW50aWNhdGlvbiBjaGVjayBoZXJlXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuICAgIFxyXG4gICAgaWYgKCF1c2VGaXJlc3RvcmUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdQT1NUIGZ1bmN0aW9uYWxpdHkgcmVxdWlyZXMgRmlyZXN0b3JlIHRvIGJlIGF2YWlsYWJsZScgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAzIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtaXNzaW5nUGVyc29uc1NlcnZpY2UuY3JlYXRlKHtcclxuICAgICAgY2FzZU51bWJlcjogYm9keS5jYXNlTnVtYmVyLFxyXG4gICAgICBuYW1lOiBib2R5Lm5hbWUsXHJcbiAgICAgIGFnZTogYm9keS5hZ2UsXHJcbiAgICAgIGdlbmRlcjogYm9keS5nZW5kZXIsXHJcbiAgICAgIGV0aG5pY2l0eTogYm9keS5ldGhuaWNpdHksXHJcbiAgICAgIGNpdHk6IGJvZHkuY2l0eSxcclxuICAgICAgY291bnR5OiBib2R5LmNvdW50eSxcclxuICAgICAgc3RhdGU6IGJvZHkuc3RhdGUsXHJcbiAgICAgIGxvY2F0aW9uOiBib2R5LmxvY2F0aW9uLFxyXG4gICAgICBsYXRpdHVkZTogYm9keS5sYXRpdHVkZSxcclxuICAgICAgbG9uZ2l0dWRlOiBib2R5LmxvbmdpdHVkZSxcclxuICAgICAgZGF0ZU1pc3Npbmc6IGJvZHkuZGF0ZU1pc3NpbmcsXHJcbiAgICAgIGRhdGVSZXBvcnRlZDogYm9keS5kYXRlUmVwb3J0ZWQgfHwgYm9keS5kYXRlTWlzc2luZyxcclxuICAgICAgc3RhdHVzOiBib2R5LnN0YXR1cyB8fCAnQWN0aXZlJyxcclxuICAgICAgY2F0ZWdvcnk6IGJvZHkuY2F0ZWdvcnkgfHwgKGJvZHkuYWdlICYmIGJvZHkuYWdlIDwgMTggPyAnTWlzc2luZyBDaGlsZHJlbicgOiAnTWlzc2luZyBBZHVsdHMnKSxcclxuICAgICAgZGVzY3JpcHRpb246IGJvZHkuZGVzY3JpcHRpb24sXHJcbiAgICAgIHNvdXJjZTogJ2FwaV9jcmVhdGUnXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQsIHsgc3RhdHVzOiAyMDEgfSlcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBtaXNzaW5nIHBlcnNvbjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgbWlzc2luZyBwZXJzb24nLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJtaXNzaW5nUGVyc29uc1NlcnZpY2UiLCJwcm9taXNlcyIsImZzIiwicGF0aCIsInBhcnNlIiwibG9hZEdlb2NhY2hlIiwiZ2VvY2FjaGVEYXRhIiwidXNlRmlyZXN0b3JlIiwicGFyc2VBZ2VUb0ludCIsImFnZVRleHQiLCJ1bmRlZmluZWQiLCJkaWdpdHMiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJtYXBSb3dUb01pc3NpbmdQZXJzb24iLCJyb3ciLCJpbmRleCIsImNhc2VOdW1iZXIiLCJ0b1N0cmluZyIsInRyaW0iLCJkbGMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImNpdHkiLCJzdGF0ZSIsImNvdW50eSIsInNleCIsImV0aG5pY2l0eSIsImFnZSIsImNhdGVnb3J5IiwiY2FjaGVLZXkiLCJ0b0xvd2VyQ2FzZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibGF0IiwibG9uIiwibG9jYXRpb24iLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImZ1bGxOYW1lIiwiaWQiLCJuYW1lIiwiZGF0ZSIsInN0YXR1cyIsInJlcG9ydGVkTWlzc2luZyIsImdlbmRlciIsImRlc2NyaXB0aW9uIiwiZ2V0RnJvbUZpcmVzdG9yZSIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwibGltaXQiLCJnZXQiLCJvZmZzZXQiLCJzZWFyY2giLCJyZXN1bHQiLCJkYXRhIiwibWFwIiwiaXRlbSIsImRhdGVNaXNzaW5nIiwiZGF0ZVJlcG9ydGVkIiwibWV0YSIsInRvdGFsIiwibGVuZ3RoIiwiaGFzTW9yZSIsInNvdXJjZSIsImdldEJ5Q2F0ZWdvcnkiLCJmaXJlc3RvcmVSZXN1bHQiLCJnZXRBbGwiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZ2V0RnJvbUNTViIsIk9iamVjdCIsImtleXMiLCJjc3ZQYXRoIiwicHJvY2VzcyIsImN3ZCIsImFjY2VzcyIsImNzdkNvbnRlbnQiLCJyZWFkRmlsZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsInJlY29yZHMiLCJjb2x1bW5zIiwic2tpcF9lbXB0eV9saW5lcyIsIm1pc3NpbmdQZXJzb25zIiwicmVjb3JkIiwicGFnaW5hdGVkUmVzdWx0cyIsIkdFVCIsImxvZyIsIndhcm4iLCJkZXRhaWxzIiwiUE9TVCIsImJvZHkiLCJjcmVhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/missing-persons/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/firebase/config.ts":
/*!************************************!*\
  !*** ./src/lib/firebase/config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(rsc)/./node_modules/firebase/app/dist/index.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(rsc)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"(rsc)/./node_modules/firebase/auth/dist/index.mjs\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/storage */ \"(rsc)/./node_modules/firebase/storage/dist/index.mjs\");\n\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCexq5vJYj21qFB1kjx1pljBZ5SIWsRKCk\",\n    authDomain: \"save-them-now.firebaseapp.com\",\n    projectId: \"save-them-now\",\n    storageBucket: \"save-them-now.firebasestorage.app\",\n    messagingSenderId: \"1013206442264\",\n    appId: \"1:1013206442264:web:48ff46395a1bed12f93e6d\",\n    measurementId: \"G-NSN8EJ2869\"\n};\n// Check if Firebase config is valid\nfunction isFirebaseConfigValid() {\n    return !!(firebaseConfig.apiKey && firebaseConfig.authDomain && firebaseConfig.projectId && firebaseConfig.apiKey !== \"your-firebase-api-key\" // Check for placeholder\n    );\n}\nlet app = null;\nlet db = null;\nlet auth = null;\nlet storage = null;\n// Initialize Firebase only if config is valid\nif (isFirebaseConfigValid()) {\n    try {\n        app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length === 0 ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig) : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\n        db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\n        auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(app);\n        storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(app);\n        console.log(\"Firebase initialized successfully\");\n    } catch (error) {\n        console.warn(\"Firebase initialization failed:\", error);\n        app = null;\n        db = null;\n        auth = null;\n        storage = null;\n    }\n} else {\n    console.warn(\"Firebase config is invalid or incomplete, skipping initialization\");\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ZpcmViYXNlL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQUNKO0FBQ1Y7QUFDTTtBQUU3QyxNQUFNSyxpQkFBaUI7SUFDckJDLFFBQVFDLHlDQUF3QztJQUNoREcsWUFBWUgsK0JBQTRDO0lBQ3hESyxXQUFXTCxlQUEyQztJQUN0RE8sZUFBZVAsbUNBQStDO0lBQzlEUyxtQkFBbUJULGVBQW9EO0lBQ3ZFVyxPQUFPWCw0Q0FBdUM7SUFDOUNhLGVBQWViLGNBQStDO0FBQ2hFO0FBRUEsb0NBQW9DO0FBQ3BDLFNBQVNlO0lBQ1AsT0FBTyxDQUFDLENBQ05qQixDQUFBQSxlQUFlQyxNQUFNLElBQ3JCRCxlQUFlSyxVQUFVLElBQ3pCTCxlQUFlTyxTQUFTLElBQ3hCUCxlQUFlQyxNQUFNLEtBQUssd0JBQXdCLHdCQUF3QjtJQUExQjtBQUVwRDtBQUVBLElBQUlpQixNQUFXO0FBQ2YsSUFBSUMsS0FBVTtBQUNkLElBQUlDLE9BQVk7QUFDaEIsSUFBSUMsVUFBZTtBQUVuQiw4Q0FBOEM7QUFDOUMsSUFBSUoseUJBQXlCO0lBQzNCLElBQUk7UUFDRkMsTUFBTXRCLHFEQUFPQSxHQUFHMEIsTUFBTSxLQUFLLElBQUkzQiwyREFBYUEsQ0FBQ0ssa0JBQWtCSixxREFBT0EsRUFBRSxDQUFDLEVBQUU7UUFDM0V1QixLQUFLdEIsZ0VBQVlBLENBQUNxQjtRQUNsQkUsT0FBT3RCLHNEQUFPQSxDQUFDb0I7UUFDZkcsVUFBVXRCLDREQUFVQSxDQUFDbUI7UUFDckJLLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0MsT0FBTztRQUNkRixRQUFRRyxJQUFJLENBQUMsbUNBQW1DRDtRQUNoRFAsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsVUFBVTtJQUNaO0FBQ0YsT0FBTztJQUNMRSxRQUFRRyxJQUFJLENBQUM7QUFDZjtBQUU0QjtBQUM1QixpRUFBZVIsR0FBR0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NhdmV0aGVtbm93LWplc3VzLy4vc3JjL2xpYi9maXJlYmFzZS9jb25maWcudHM/NzdjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBnZXRBcHBzIH0gZnJvbSAnZmlyZWJhc2UvYXBwJ1xyXG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnXHJcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tICdmaXJlYmFzZS9hdXRoJ1xyXG5pbXBvcnQgeyBnZXRTdG9yYWdlIH0gZnJvbSAnZmlyZWJhc2Uvc3RvcmFnZSdcclxuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSxcclxuICBhdXRoRG9tYWluOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTixcclxuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXHJcbiAgc3RvcmFnZUJ1Y2tldDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQsXHJcbiAgYXBwSWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCxcclxuICBtZWFzdXJlbWVudElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9NRUFTVVJFTUVOVF9JRFxyXG59XHJcblxyXG4vLyBDaGVjayBpZiBGaXJlYmFzZSBjb25maWcgaXMgdmFsaWRcclxuZnVuY3Rpb24gaXNGaXJlYmFzZUNvbmZpZ1ZhbGlkKCkge1xyXG4gIHJldHVybiAhIShcclxuICAgIGZpcmViYXNlQ29uZmlnLmFwaUtleSAmJiBcclxuICAgIGZpcmViYXNlQ29uZmlnLmF1dGhEb21haW4gJiYgXHJcbiAgICBmaXJlYmFzZUNvbmZpZy5wcm9qZWN0SWQgJiZcclxuICAgIGZpcmViYXNlQ29uZmlnLmFwaUtleSAhPT0gJ3lvdXItZmlyZWJhc2UtYXBpLWtleScgLy8gQ2hlY2sgZm9yIHBsYWNlaG9sZGVyXHJcbiAgKVxyXG59XHJcblxyXG5sZXQgYXBwOiBhbnkgPSBudWxsXHJcbmxldCBkYjogYW55ID0gbnVsbFxyXG5sZXQgYXV0aDogYW55ID0gbnVsbFxyXG5sZXQgc3RvcmFnZTogYW55ID0gbnVsbFxyXG5cclxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZSBvbmx5IGlmIGNvbmZpZyBpcyB2YWxpZFxyXG5pZiAoaXNGaXJlYmFzZUNvbmZpZ1ZhbGlkKCkpIHtcclxuICB0cnkge1xyXG4gICAgYXBwID0gZ2V0QXBwcygpLmxlbmd0aCA9PT0gMCA/IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpIDogZ2V0QXBwcygpWzBdXHJcbiAgICBkYiA9IGdldEZpcmVzdG9yZShhcHApXHJcbiAgICBhdXRoID0gZ2V0QXV0aChhcHApXHJcbiAgICBzdG9yYWdlID0gZ2V0U3RvcmFnZShhcHApXHJcbiAgICBjb25zb2xlLmxvZygnRmlyZWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS53YXJuKCdGaXJlYmFzZSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpXHJcbiAgICBhcHAgPSBudWxsXHJcbiAgICBkYiA9IG51bGxcclxuICAgIGF1dGggPSBudWxsXHJcbiAgICBzdG9yYWdlID0gbnVsbFxyXG4gIH1cclxufSBlbHNlIHtcclxuICBjb25zb2xlLndhcm4oJ0ZpcmViYXNlIGNvbmZpZyBpcyBpbnZhbGlkIG9yIGluY29tcGxldGUsIHNraXBwaW5nIGluaXRpYWxpemF0aW9uJylcclxufVxyXG5cclxuZXhwb3J0IHsgZGIsIGF1dGgsIHN0b3JhZ2UgfVxyXG5leHBvcnQgZGVmYXVsdCBhcHAiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUFwcCIsImdldEFwcHMiLCJnZXRGaXJlc3RvcmUiLCJnZXRBdXRoIiwiZ2V0U3RvcmFnZSIsImZpcmViYXNlQ29uZmlnIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkiLCJhdXRoRG9tYWluIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4iLCJwcm9qZWN0SWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEIiwic3RvcmFnZUJ1Y2tldCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUIiwibWVzc2FnaW5nU2VuZGVySWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIiwiYXBwSWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQiLCJtZWFzdXJlbWVudElkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQiLCJpc0ZpcmViYXNlQ29uZmlnVmFsaWQiLCJhcHAiLCJkYiIsImF1dGgiLCJzdG9yYWdlIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/firebase/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/firestore/services.ts":
/*!***************************************!*\
  !*** ./src/lib/firestore/services.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DonationsService: () => (/* binding */ DonationsService),\n/* harmony export */   MissingPersonsService: () => (/* binding */ MissingPersonsService),\n/* harmony export */   SubscriptionsService: () => (/* binding */ SubscriptionsService),\n/* harmony export */   UsersService: () => (/* binding */ UsersService),\n/* harmony export */   donationsService: () => (/* binding */ donationsService),\n/* harmony export */   missingPersonsService: () => (/* binding */ missingPersonsService),\n/* harmony export */   subscriptionsService: () => (/* binding */ subscriptionsService),\n/* harmony export */   usersService: () => (/* binding */ usersService)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(rsc)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var _lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebase/config */ \"(rsc)/./src/lib/firebase/config.ts\");\n\n\n// Helper function to check if Firestore is available\nfunction isFirestoreAvailable() {\n    return _lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db !== null && _lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db !== undefined;\n}\n/**\r\n * Missing Persons Service\r\n */ class MissingPersonsService {\n    async getAll(options = {}) {\n        if (!isFirestoreAvailable()) {\n            throw new Error(\"Firestore is not available\");\n        }\n        const { limit: pageLimit = 100, offset = 0 } = options;\n        try {\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"dateMissing\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit));\n            // Handle offset-based pagination\n            if (offset > 0) {\n                const offsetDocs = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"dateMissing\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(offset)));\n                if (offsetDocs.docs.length > 0) {\n                    const lastVisible = offsetDocs.docs[offsetDocs.docs.length - 1];\n                    q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"dateMissing\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastVisible), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit));\n                }\n            }\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const data = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            return {\n                data,\n                meta: {\n                    total: data.length,\n                    limit: pageLimit,\n                    offset,\n                    hasMore: data.length === pageLimit\n                }\n            };\n        } catch (error) {\n            console.error(\"Error fetching missing persons:\", error);\n            throw new Error(\"Failed to fetch missing persons\");\n        }\n    }\n    async search(searchTerm, options = {}) {\n        if (!isFirestoreAvailable()) {\n            throw new Error(\"Firestore is not available\");\n        }\n        const { limit: pageLimit = 50 } = options;\n        try {\n            // Create multiple search queries\n            const queries = [\n                // Search by name\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.name\", \">=\", searchTerm.toLowerCase()), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.name\", \"<=\", searchTerm.toLowerCase() + \"\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit)),\n                // Search by city\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.city\", \">=\", searchTerm.toLowerCase()), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.city\", \"<=\", searchTerm.toLowerCase() + \"\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit)),\n                // Search by case number\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.caseNumber\", \">=\", searchTerm.toLowerCase()), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"searchable.caseNumber\", \"<=\", searchTerm.toLowerCase() + \"\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit))\n            ];\n            const results = await Promise.all(queries.map((q)=>(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)));\n            const allDocs = new Map();\n            // Combine results and remove duplicates\n            results.forEach((snapshot)=>{\n                snapshot.docs.forEach((doc)=>{\n                    allDocs.set(doc.id, {\n                        id: doc.id,\n                        ...doc.data()\n                    });\n                });\n            });\n            return Array.from(allDocs.values()).slice(0, pageLimit);\n        } catch (error) {\n            console.error(\"Error searching missing persons:\", error);\n            throw new Error(\"Failed to search missing persons\");\n        }\n    }\n    async getByCategory(category, options = {}) {\n        if (!isFirestoreAvailable()) {\n            throw new Error(\"Firestore is not available\");\n        }\n        const { limit: pageLimit = 100 } = options;\n        try {\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", category), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"dateMissing\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            return snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n        } catch (error) {\n            console.error(\"Error fetching by category:\", error);\n            throw new Error(\"Failed to fetch missing persons by category\");\n        }\n    }\n    async create(data) {\n        if (!isFirestoreAvailable()) {\n            throw new Error(\"Firestore is not available\");\n        }\n        try {\n            // Add searchable fields\n            const searchableData = {\n                ...data,\n                searchable: {\n                    name: (data.name || \"\").toLowerCase(),\n                    city: (data.city || \"\").toLowerCase(),\n                    state: (data.state || \"\").toLowerCase(),\n                    caseNumber: (data.caseNumber || \"\").toLowerCase()\n                },\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), searchableData);\n            return {\n                id: docRef.id,\n                ...searchableData\n            };\n        } catch (error) {\n            console.error(\"Error creating missing person:\", error);\n            throw new Error(\"Failed to create missing person\");\n        }\n    }\n    async update(id, data) {\n        try {\n            const updateData = {\n                ...data,\n                updatedAt: new Date()\n            };\n            // Update searchable fields if relevant data changed\n            if (data.name || data.city || data.state || data.caseNumber) {\n                updateData.searchable = {\n                    name: (data.name || \"\").toLowerCase(),\n                    city: (data.city || \"\").toLowerCase(),\n                    state: (data.state || \"\").toLowerCase(),\n                    caseNumber: (data.caseNumber || \"\").toLowerCase()\n                };\n            }\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName, id), updateData);\n            return {\n                id,\n                ...updateData\n            };\n        } catch (error) {\n            console.error(\"Error updating missing person:\", error);\n            throw new Error(\"Failed to update missing person\");\n        }\n    }\n    constructor(){\n        this.collectionName = \"missing_persons\";\n    }\n}\n/**\r\n * Users Service\r\n */ class UsersService {\n    async getByEmail(email) {\n        try {\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"email\", \"==\", email));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (snapshot.empty) {\n                return null;\n            }\n            const doc = snapshot.docs[0];\n            return {\n                id: doc.id,\n                ...doc.data()\n            };\n        } catch (error) {\n            console.error(\"Error fetching user by email:\", error);\n            throw new Error(\"Failed to fetch user\");\n        }\n    }\n    async create(data) {\n        try {\n            const userData = {\n                ...data,\n                tier: data.tier || \"free\",\n                emailVerified: data.emailVerified || false,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), userData);\n            return {\n                id: docRef.id,\n                ...userData\n            };\n        } catch (error) {\n            console.error(\"Error creating user:\", error);\n            throw new Error(\"Failed to create user\");\n        }\n    }\n    async update(id, data) {\n        try {\n            const updateData = {\n                ...data,\n                updatedAt: new Date()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName, id), updateData);\n            return {\n                id,\n                ...updateData\n            };\n        } catch (error) {\n            console.error(\"Error updating user:\", error);\n            throw new Error(\"Failed to update user\");\n        }\n    }\n    constructor(){\n        this.collectionName = \"users\";\n    }\n}\n/**\r\n * Donations Service\r\n */ class DonationsService {\n    async getByUserId(userId, options = {}) {\n        const { limit: pageLimit = 10, offset = 0 } = options;\n        try {\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit));\n            if (offset > 0) {\n                const offsetDocs = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(offset)));\n                if (offsetDocs.docs.length > 0) {\n                    const lastVisible = offsetDocs.docs[offsetDocs.docs.length - 1];\n                    q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastVisible), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageLimit));\n                }\n            }\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const donations = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Get totals\n            const allUserDonations = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId)));\n            const totalAmount = allUserDonations.docs.reduce((sum, doc)=>{\n                return sum + (doc.data().amount || 0);\n            }, 0);\n            return {\n                donations,\n                pagination: {\n                    limit: pageLimit,\n                    offset,\n                    total: allUserDonations.size\n                },\n                summary: {\n                    totalDonated: totalAmount,\n                    totalDonations: allUserDonations.size\n                }\n            };\n        } catch (error) {\n            console.error(\"Error fetching donations:\", error);\n            throw new Error(\"Failed to fetch donations\");\n        }\n    }\n    async create(data) {\n        try {\n            const donationData = {\n                ...data,\n                currency: data.currency || \"usd\",\n                createdAt: new Date()\n            };\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), donationData);\n            return {\n                id: docRef.id,\n                ...donationData\n            };\n        } catch (error) {\n            console.error(\"Error creating donation:\", error);\n            throw new Error(\"Failed to create donation\");\n        }\n    }\n    constructor(){\n        this.collectionName = \"donations\";\n    }\n}\n/**\r\n * Subscriptions Service\r\n */ class SubscriptionsService {\n    async getActiveByUserId(userId) {\n        try {\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"active\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (snapshot.empty) {\n                return null;\n            }\n            const doc = snapshot.docs[0];\n            return {\n                id: doc.id,\n                ...doc.data()\n            };\n        } catch (error) {\n            console.error(\"Error fetching subscription:\", error);\n            throw new Error(\"Failed to fetch subscription\");\n        }\n    }\n    async create(data) {\n        try {\n            const subscriptionData = {\n                ...data,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), subscriptionData);\n            return {\n                id: docRef.id,\n                ...subscriptionData\n            };\n        } catch (error) {\n            console.error(\"Error creating subscription:\", error);\n            throw new Error(\"Failed to create subscription\");\n        }\n    }\n    async update(id, data) {\n        try {\n            const updateData = {\n                ...data,\n                updatedAt: new Date()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName, id), updateData);\n            return {\n                id,\n                ...updateData\n            };\n        } catch (error) {\n            console.error(\"Error updating subscription:\", error);\n            throw new Error(\"Failed to update subscription\");\n        }\n    }\n    async updateByStripeId(stripeSubscriptionId, data) {\n        try {\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase_config__WEBPACK_IMPORTED_MODULE_1__.db, this.collectionName), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"stripeSubscriptionId\", \"==\", stripeSubscriptionId));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (snapshot.empty) {\n                throw new Error(\"Subscription not found\");\n            }\n            const subscriptionDoc = snapshot.docs[0];\n            await this.update(subscriptionDoc.id, data);\n            return {\n                id: subscriptionDoc.id,\n                ...data\n            };\n        } catch (error) {\n            console.error(\"Error updating subscription by Stripe ID:\", error);\n            throw new Error(\"Failed to update subscription\");\n        }\n    }\n    constructor(){\n        this.collectionName = \"subscriptions\";\n    }\n}\n// Export service instances\nconst missingPersonsService = new MissingPersonsService();\nconst usersService = new UsersService();\nconst donationsService = new DonationsService();\nconst subscriptionsService = new SubscriptionsService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUk7WUFBQztRQUMzQyxFQUFFLE9BQU9NLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZDQUE2Q0E7WUFDM0QsTUFBTSxJQUFJaEIsTUFBTTtRQUNsQjtJQUNGOzthQTlFUUksaUJBQWlCOztBQStFM0I7QUFFQSwyQkFBMkI7QUFDcEIsTUFBTXlFLHdCQUF3QixJQUFJaEYsd0JBQXVCO0FBQ3pELE1BQU1pRixlQUFlLElBQUk5QixlQUFjO0FBQ3ZDLE1BQU0rQixtQkFBbUIsSUFBSXhCLG1CQUFrQjtBQUMvQyxNQUFNeUIsdUJBQXVCLElBQUlULHVCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NhdmV0aGVtbm93LWplc3VzLy4vc3JjL2xpYi9maXJlc3RvcmUvc2VydmljZXMudHM/YWI4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcclxuICBjb2xsZWN0aW9uLCBcclxuICBkb2MsIFxyXG4gIGdldERvY3MsIFxyXG4gIGdldERvYywgXHJcbiAgYWRkRG9jLCBcclxuICB1cGRhdGVEb2MsIFxyXG4gIGRlbGV0ZURvYywgXHJcbiAgcXVlcnksIFxyXG4gIHdoZXJlLCBcclxuICBvcmRlckJ5LCBcclxuICBsaW1pdCwgXHJcbiAgc3RhcnRBZnRlcixcclxuICBRdWVyeUNvbnN0cmFpbnQsXHJcbiAgRG9jdW1lbnREYXRhLFxyXG4gIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCxcclxuICBUaW1lc3RhbXBcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnXHJcbmltcG9ydCB7IGFkbWluRGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZS9hZG1pbidcclxuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZS9jb25maWcnXHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgRmlyZXN0b3JlIGlzIGF2YWlsYWJsZVxyXG5mdW5jdGlvbiBpc0ZpcmVzdG9yZUF2YWlsYWJsZSgpIHtcclxuICByZXR1cm4gZGIgIT09IG51bGwgJiYgZGIgIT09IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2luYXRpb25PcHRpb25zIHtcclxuICBsaW1pdD86IG51bWJlclxyXG4gIG9mZnNldD86IG51bWJlclxyXG4gIGxhc3REb2M/OiBRdWVyeURvY3VtZW50U25hcHNob3Q8RG9jdW1lbnREYXRhPlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1pc3NpbmdQZXJzb25EYXRhIHtcclxuICBjYXNlTnVtYmVyOiBzdHJpbmdcclxuICBuYW1lOiBzdHJpbmdcclxuICBhZ2U/OiBudW1iZXJcclxuICBnZW5kZXI/OiBzdHJpbmdcclxuICBldGhuaWNpdHk/OiBzdHJpbmdcclxuICBjaXR5Pzogc3RyaW5nXHJcbiAgY291bnR5Pzogc3RyaW5nXHJcbiAgc3RhdGU/OiBzdHJpbmdcclxuICBsb2NhdGlvbj86IHN0cmluZ1xyXG4gIGxhdGl0dWRlPzogbnVtYmVyXHJcbiAgbG9uZ2l0dWRlPzogbnVtYmVyXHJcbiAgZGF0ZU1pc3Npbmc/OiBzdHJpbmdcclxuICBkYXRlUmVwb3J0ZWQ/OiBzdHJpbmdcclxuICBzdGF0dXM6IHN0cmluZ1xyXG4gIGNhdGVnb3J5OiBzdHJpbmdcclxuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xyXG4gIHNvdXJjZT86IHN0cmluZ1xyXG4gIHNlYXJjaGFibGU/OiB7XHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGNpdHk6IHN0cmluZ1xyXG4gICAgc3RhdGU6IHN0cmluZ1xyXG4gICAgY2FzZU51bWJlcjogc3RyaW5nXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJEYXRhIHtcclxuICBlbWFpbDogc3RyaW5nXHJcbiAgbmFtZTogc3RyaW5nXHJcbiAgdGllcj86IHN0cmluZ1xyXG4gIHppcENvZGU/OiBzdHJpbmdcclxuICBlbWFpbFZlcmlmaWVkPzogYm9vbGVhblxyXG4gIGNyZWF0ZWRBdD86IERhdGVcclxuICBsYXN0TG9naW4/OiBEYXRlXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9uYXRpb25EYXRhIHtcclxuICB1c2VySWQ/OiBzdHJpbmdcclxuICBlbWFpbDogc3RyaW5nXHJcbiAgYW1vdW50OiBudW1iZXJcclxuICBjdXJyZW5jeT86IHN0cmluZ1xyXG4gIGRvbmF0aW9uVHlwZT86IHN0cmluZ1xyXG4gIGFub255bW91cz86IGJvb2xlYW5cclxuICBtZXNzYWdlPzogc3RyaW5nXHJcbiAgc3RyaXBlUGF5bWVudEludGVudElkPzogc3RyaW5nXHJcbiAgcmVjZWlwdFNlbnQ/OiBib29sZWFuXHJcbiAgdGF4UmVjZWlwdElkPzogc3RyaW5nXHJcbiAgY3JlYXRlZEF0PzogRGF0ZVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvbkRhdGEge1xyXG4gIHVzZXJJZDogc3RyaW5nXHJcbiAgdGllcklkPzogc3RyaW5nXHJcbiAgc3RhdHVzOiBzdHJpbmdcclxuICBzdHJpcGVTdWJzY3JpcHRpb25JZD86IHN0cmluZ1xyXG4gIHN0cmlwZUN1c3RvbWVySWQ/OiBzdHJpbmdcclxuICBjdXJyZW50UGVyaW9kU3RhcnQ/OiBEYXRlXHJcbiAgY3VycmVudFBlcmlvZEVuZD86IERhdGVcclxuICBjYW5jZWxBdFBlcmlvZEVuZD86IGJvb2xlYW5cclxuICBjcmVhdGVkQXQ/OiBEYXRlXHJcbiAgdXBkYXRlZEF0PzogRGF0ZVxyXG59XHJcblxyXG4vKipcclxuICogTWlzc2luZyBQZXJzb25zIFNlcnZpY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNaXNzaW5nUGVyc29uc1NlcnZpY2Uge1xyXG4gIHByaXZhdGUgY29sbGVjdGlvbk5hbWUgPSAnbWlzc2luZ19wZXJzb25zJ1xyXG5cclxuICBhc3luYyBnZXRBbGwob3B0aW9uczogUGFnaW5hdGlvbk9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKCFpc0ZpcmVzdG9yZUF2YWlsYWJsZSgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmlyZXN0b3JlIGlzIG5vdCBhdmFpbGFibGUnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB7IGxpbWl0OiBwYWdlTGltaXQgPSAxMDAsIG9mZnNldCA9IDAgfSA9IG9wdGlvbnNcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHEgPSBxdWVyeShcclxuICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICBvcmRlckJ5KCdkYXRlTWlzc2luZycsICdkZXNjJyksXHJcbiAgICAgICAgbGltaXQocGFnZUxpbWl0KVxyXG4gICAgICApXHJcblxyXG4gICAgICAvLyBIYW5kbGUgb2Zmc2V0LWJhc2VkIHBhZ2luYXRpb25cclxuICAgICAgaWYgKG9mZnNldCA+IDApIHtcclxuICAgICAgICBjb25zdCBvZmZzZXREb2NzID0gYXdhaXQgZ2V0RG9jcyhxdWVyeShcclxuICAgICAgICAgIGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLFxyXG4gICAgICAgICAgb3JkZXJCeSgnZGF0ZU1pc3NpbmcnLCAnZGVzYycpLFxyXG4gICAgICAgICAgbGltaXQob2Zmc2V0KVxyXG4gICAgICAgICkpXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG9mZnNldERvY3MuZG9jcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCBsYXN0VmlzaWJsZSA9IG9mZnNldERvY3MuZG9jc1tvZmZzZXREb2NzLmRvY3MubGVuZ3RoIC0gMV1cclxuICAgICAgICAgIHEgPSBxdWVyeShcclxuICAgICAgICAgICAgY29sbGVjdGlvbihkYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSksXHJcbiAgICAgICAgICAgIG9yZGVyQnkoJ2RhdGVNaXNzaW5nJywgJ2Rlc2MnKSxcclxuICAgICAgICAgICAgc3RhcnRBZnRlcihsYXN0VmlzaWJsZSksXHJcbiAgICAgICAgICAgIGxpbWl0KHBhZ2VMaW1pdClcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxyXG4gICAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XHJcbiAgICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgICAuLi5kb2MuZGF0YSgpXHJcbiAgICAgIH0pKVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgIHRvdGFsOiBkYXRhLmxlbmd0aCwgLy8gTm90ZTogRm9yIGV4YWN0IHRvdGFsLCBuZWVkIGEgc2VwYXJhdGUgY291bnQgcXVlcnlcclxuICAgICAgICAgIGxpbWl0OiBwYWdlTGltaXQsXHJcbiAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICBoYXNNb3JlOiBkYXRhLmxlbmd0aCA9PT0gcGFnZUxpbWl0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtaXNzaW5nIHBlcnNvbnM6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIG1pc3NpbmcgcGVyc29ucycpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZWFyY2goc2VhcmNoVGVybTogc3RyaW5nLCBvcHRpb25zOiBQYWdpbmF0aW9uT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBpZiAoIWlzRmlyZXN0b3JlQXZhaWxhYmxlKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlc3RvcmUgaXMgbm90IGF2YWlsYWJsZScpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgbGltaXQ6IHBhZ2VMaW1pdCA9IDUwIH0gPSBvcHRpb25zXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENyZWF0ZSBtdWx0aXBsZSBzZWFyY2ggcXVlcmllc1xyXG4gICAgICBjb25zdCBxdWVyaWVzID0gW1xyXG4gICAgICAgIC8vIFNlYXJjaCBieSBuYW1lXHJcbiAgICAgICAgcXVlcnkoXHJcbiAgICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICAgIHdoZXJlKCdzZWFyY2hhYmxlLm5hbWUnLCAnPj0nLCBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpLFxyXG4gICAgICAgICAgd2hlcmUoJ3NlYXJjaGFibGUubmFtZScsICc8PScsIHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSArICdcXHVmOGZmJyksXHJcbiAgICAgICAgICBsaW1pdChwYWdlTGltaXQpXHJcbiAgICAgICAgKSxcclxuICAgICAgICAvLyBTZWFyY2ggYnkgY2l0eVxyXG4gICAgICAgIHF1ZXJ5KFxyXG4gICAgICAgICAgY29sbGVjdGlvbihkYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSksXHJcbiAgICAgICAgICB3aGVyZSgnc2VhcmNoYWJsZS5jaXR5JywgJz49Jywgc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSxcclxuICAgICAgICAgIHdoZXJlKCdzZWFyY2hhYmxlLmNpdHknLCAnPD0nLCBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkgKyAnXFx1ZjhmZicpLFxyXG4gICAgICAgICAgbGltaXQocGFnZUxpbWl0KVxyXG4gICAgICAgICksXHJcbiAgICAgICAgLy8gU2VhcmNoIGJ5IGNhc2UgbnVtYmVyXHJcbiAgICAgICAgcXVlcnkoXHJcbiAgICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICAgIHdoZXJlKCdzZWFyY2hhYmxlLmNhc2VOdW1iZXInLCAnPj0nLCBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpLFxyXG4gICAgICAgICAgd2hlcmUoJ3NlYXJjaGFibGUuY2FzZU51bWJlcicsICc8PScsIHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSArICdcXHVmOGZmJyksXHJcbiAgICAgICAgICBsaW1pdChwYWdlTGltaXQpXHJcbiAgICAgICAgKVxyXG4gICAgICBdXHJcblxyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocXVlcmllcy5tYXAocSA9PiBnZXREb2NzKHEpKSlcclxuICAgICAgY29uc3QgYWxsRG9jcyA9IG5ldyBNYXAoKVxyXG5cclxuICAgICAgLy8gQ29tYmluZSByZXN1bHRzIGFuZCByZW1vdmUgZHVwbGljYXRlc1xyXG4gICAgICByZXN1bHRzLmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgIHNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgICAgYWxsRG9jcy5zZXQoZG9jLmlkLCB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmV0dXJuIEFycmF5LmZyb20oYWxsRG9jcy52YWx1ZXMoKSkuc2xpY2UoMCwgcGFnZUxpbWl0KVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIG1pc3NpbmcgcGVyc29uczonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2VhcmNoIG1pc3NpbmcgcGVyc29ucycpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRCeUNhdGVnb3J5KGNhdGVnb3J5OiBzdHJpbmcsIG9wdGlvbnM6IFBhZ2luYXRpb25PcHRpb25zID0ge30pIHtcclxuICAgIGlmICghaXNGaXJlc3RvcmVBdmFpbGFibGUoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcmVzdG9yZSBpcyBub3QgYXZhaWxhYmxlJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBsaW1pdDogcGFnZUxpbWl0ID0gMTAwIH0gPSBvcHRpb25zXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcclxuICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICB3aGVyZSgnY2F0ZWdvcnknLCAnPT0nLCBjYXRlZ29yeSksXHJcbiAgICAgICAgb3JkZXJCeSgnZGF0ZU1pc3NpbmcnLCAnZGVzYycpLFxyXG4gICAgICAgIGxpbWl0KHBhZ2VMaW1pdClcclxuICAgICAgKVxyXG5cclxuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXHJcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGJ5IGNhdGVnb3J5OicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBtaXNzaW5nIHBlcnNvbnMgYnkgY2F0ZWdvcnknKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlKGRhdGE6IE1pc3NpbmdQZXJzb25EYXRhKSB7XHJcbiAgICBpZiAoIWlzRmlyZXN0b3JlQXZhaWxhYmxlKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlc3RvcmUgaXMgbm90IGF2YWlsYWJsZScpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEFkZCBzZWFyY2hhYmxlIGZpZWxkc1xyXG4gICAgICBjb25zdCBzZWFyY2hhYmxlRGF0YSA9IHtcclxuICAgICAgICAuLi5kYXRhLFxyXG4gICAgICAgIHNlYXJjaGFibGU6IHtcclxuICAgICAgICAgIG5hbWU6IChkYXRhLm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICBjaXR5OiAoZGF0YS5jaXR5IHx8ICcnKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgc3RhdGU6IChkYXRhLnN0YXRlIHx8ICcnKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgY2FzZU51bWJlcjogKGRhdGEuY2FzZU51bWJlciB8fCAnJykudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSksIHNlYXJjaGFibGVEYXRhKVxyXG4gICAgICByZXR1cm4geyBpZDogZG9jUmVmLmlkLCAuLi5zZWFyY2hhYmxlRGF0YSB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBtaXNzaW5nIHBlcnNvbjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG1pc3NpbmcgcGVyc29uJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZShpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE1pc3NpbmdQZXJzb25EYXRhPikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcclxuICAgICAgICAuLi5kYXRhLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVcGRhdGUgc2VhcmNoYWJsZSBmaWVsZHMgaWYgcmVsZXZhbnQgZGF0YSBjaGFuZ2VkXHJcbiAgICAgIGlmIChkYXRhLm5hbWUgfHwgZGF0YS5jaXR5IHx8IGRhdGEuc3RhdGUgfHwgZGF0YS5jYXNlTnVtYmVyKSB7XHJcbiAgICAgICAgdXBkYXRlRGF0YS5zZWFyY2hhYmxlID0ge1xyXG4gICAgICAgICAgbmFtZTogKGRhdGEubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgIGNpdHk6IChkYXRhLmNpdHkgfHwgJycpLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICBzdGF0ZTogKGRhdGEuc3RhdGUgfHwgJycpLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICBjYXNlTnVtYmVyOiAoZGF0YS5jYXNlTnVtYmVyIHx8ICcnKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lLCBpZCksIHVwZGF0ZURhdGEpXHJcbiAgICAgIHJldHVybiB7IGlkLCAuLi51cGRhdGVEYXRhIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG1pc3NpbmcgcGVyc29uOicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgbWlzc2luZyBwZXJzb24nKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFVzZXJzIFNlcnZpY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVc2Vyc1NlcnZpY2Uge1xyXG4gIHByaXZhdGUgY29sbGVjdGlvbk5hbWUgPSAndXNlcnMnXHJcblxyXG4gIGFzeW5jIGdldEJ5RW1haWwoZW1haWw6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLCB3aGVyZSgnZW1haWwnLCAnPT0nLCBlbWFpbCkpXHJcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxyXG4gICAgICBcclxuICAgICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXVxyXG4gICAgICByZXR1cm4geyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHVzZXInKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlKGRhdGE6IFVzZXJEYXRhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcclxuICAgICAgICAuLi5kYXRhLFxyXG4gICAgICAgIHRpZXI6IGRhdGEudGllciB8fCAnZnJlZScsXHJcbiAgICAgICAgZW1haWxWZXJpZmllZDogZGF0YS5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLCB1c2VyRGF0YSlcclxuICAgICAgcmV0dXJuIHsgaWQ6IGRvY1JlZi5pZCwgLi4udXNlckRhdGEgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHVzZXInKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8VXNlckRhdGE+KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUsIGlkKSwgdXBkYXRlRGF0YSlcclxuICAgICAgcmV0dXJuIHsgaWQsIC4uLnVwZGF0ZURhdGEgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlcjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHVzZXInKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERvbmF0aW9ucyBTZXJ2aWNlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRG9uYXRpb25zU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBjb2xsZWN0aW9uTmFtZSA9ICdkb25hdGlvbnMnXHJcblxyXG4gIGFzeW5jIGdldEJ5VXNlcklkKHVzZXJJZDogc3RyaW5nLCBvcHRpb25zOiBQYWdpbmF0aW9uT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCB7IGxpbWl0OiBwYWdlTGltaXQgPSAxMCwgb2Zmc2V0ID0gMCB9ID0gb3B0aW9uc1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcSA9IHF1ZXJ5KFxyXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLFxyXG4gICAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxyXG4gICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXHJcbiAgICAgICAgbGltaXQocGFnZUxpbWl0KVxyXG4gICAgICApXHJcblxyXG4gICAgICBpZiAob2Zmc2V0ID4gMCkge1xyXG4gICAgICAgIGNvbnN0IG9mZnNldERvY3MgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KFxyXG4gICAgICAgICAgY29sbGVjdGlvbihkYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSksXHJcbiAgICAgICAgICB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSxcclxuICAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXHJcbiAgICAgICAgICBsaW1pdChvZmZzZXQpXHJcbiAgICAgICAgKSlcclxuICAgICAgICBcclxuICAgICAgICBpZiAob2Zmc2V0RG9jcy5kb2NzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnN0IGxhc3RWaXNpYmxlID0gb2Zmc2V0RG9jcy5kb2NzW29mZnNldERvY3MuZG9jcy5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgcSA9IHF1ZXJ5KFxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICAgICAgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCksXHJcbiAgICAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXHJcbiAgICAgICAgICAgIHN0YXJ0QWZ0ZXIobGFzdFZpc2libGUpLFxyXG4gICAgICAgICAgICBsaW1pdChwYWdlTGltaXQpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcclxuICAgICAgY29uc3QgZG9uYXRpb25zID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpXHJcblxyXG4gICAgICAvLyBHZXQgdG90YWxzXHJcbiAgICAgIGNvbnN0IGFsbFVzZXJEb25hdGlvbnMgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KFxyXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLFxyXG4gICAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpXHJcbiAgICAgICkpXHJcblxyXG4gICAgICBjb25zdCB0b3RhbEFtb3VudCA9IGFsbFVzZXJEb25hdGlvbnMuZG9jcy5yZWR1Y2UoKHN1bSwgZG9jKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHN1bSArIChkb2MuZGF0YSgpLmFtb3VudCB8fCAwKVxyXG4gICAgICB9LCAwKVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkb25hdGlvbnMsXHJcbiAgICAgICAgcGFnaW5hdGlvbjogeyBsaW1pdDogcGFnZUxpbWl0LCBvZmZzZXQsIHRvdGFsOiBhbGxVc2VyRG9uYXRpb25zLnNpemUgfSxcclxuICAgICAgICBzdW1tYXJ5OiB7IHRvdGFsRG9uYXRlZDogdG90YWxBbW91bnQsIHRvdGFsRG9uYXRpb25zOiBhbGxVc2VyRG9uYXRpb25zLnNpemUgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkb25hdGlvbnM6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGRvbmF0aW9ucycpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGUoZGF0YTogRG9uYXRpb25EYXRhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkb25hdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgLi4uZGF0YSxcclxuICAgICAgICBjdXJyZW5jeTogZGF0YS5jdXJyZW5jeSB8fCAndXNkJyxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLCBkb25hdGlvbkRhdGEpXHJcbiAgICAgIHJldHVybiB7IGlkOiBkb2NSZWYuaWQsIC4uLmRvbmF0aW9uRGF0YSB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBkb25hdGlvbjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGRvbmF0aW9uJylcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWJzY3JpcHRpb25zIFNlcnZpY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25zU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBjb2xsZWN0aW9uTmFtZSA9ICdzdWJzY3JpcHRpb25zJ1xyXG5cclxuICBhc3luYyBnZXRBY3RpdmVCeVVzZXJJZCh1c2VySWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxyXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLFxyXG4gICAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxyXG4gICAgICAgIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAnYWN0aXZlJyksXHJcbiAgICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSxcclxuICAgICAgICBsaW1pdCgxKVxyXG4gICAgICApXHJcblxyXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcclxuICAgICAgXHJcbiAgICAgIGlmIChzbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IHNuYXBzaG90LmRvY3NbMF1cclxuICAgICAgcmV0dXJuIHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdWJzY3JpcHRpb246JywgZXJyb3IpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHN1YnNjcmlwdGlvbicpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGUoZGF0YTogU3Vic2NyaXB0aW9uRGF0YSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uRGF0YSA9IHtcclxuICAgICAgICAuLi5kYXRhLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUpLCBzdWJzY3JpcHRpb25EYXRhKVxyXG4gICAgICByZXR1cm4geyBpZDogZG9jUmVmLmlkLCAuLi5zdWJzY3JpcHRpb25EYXRhIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHN1YnNjcmlwdGlvbicpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGUoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxTdWJzY3JpcHRpb25EYXRhPikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcclxuICAgICAgICAuLi5kYXRhLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lLCBpZCksIHVwZGF0ZURhdGEpXHJcbiAgICAgIHJldHVybiB7IGlkLCAuLi51cGRhdGVEYXRhIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHN1YnNjcmlwdGlvbjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbicpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVCeVN0cmlwZUlkKHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8U3Vic2NyaXB0aW9uRGF0YT4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcclxuICAgICAgICBjb2xsZWN0aW9uKGRiLCB0aGlzLmNvbGxlY3Rpb25OYW1lKSxcclxuICAgICAgICB3aGVyZSgnc3RyaXBlU3Vic2NyaXB0aW9uSWQnLCAnPT0nLCBzdHJpcGVTdWJzY3JpcHRpb25JZClcclxuICAgICAgKVxyXG5cclxuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXHJcbiAgICAgIFxyXG4gICAgICBpZiAoc25hcHNob3QuZW1wdHkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1YnNjcmlwdGlvbiBub3QgZm91bmQnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdWJzY3JpcHRpb25Eb2MgPSBzbmFwc2hvdC5kb2NzWzBdXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHN1YnNjcmlwdGlvbkRvYy5pZCwgZGF0YSlcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGlkOiBzdWJzY3JpcHRpb25Eb2MuaWQsIC4uLmRhdGEgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3Vic2NyaXB0aW9uIGJ5IFN0cmlwZSBJRDonLCBlcnJvcilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbicpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgc2VydmljZSBpbnN0YW5jZXNcclxuZXhwb3J0IGNvbnN0IG1pc3NpbmdQZXJzb25zU2VydmljZSA9IG5ldyBNaXNzaW5nUGVyc29uc1NlcnZpY2UoKVxyXG5leHBvcnQgY29uc3QgdXNlcnNTZXJ2aWNlID0gbmV3IFVzZXJzU2VydmljZSgpXHJcbmV4cG9ydCBjb25zdCBkb25hdGlvbnNTZXJ2aWNlID0gbmV3IERvbmF0aW9uc1NlcnZpY2UoKVxyXG5leHBvcnQgY29uc3Qgc3Vic2NyaXB0aW9uc1NlcnZpY2UgPSBuZXcgU3Vic2NyaXB0aW9uc1NlcnZpY2UoKSJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZG9jIiwiZ2V0RG9jcyIsImFkZERvYyIsInVwZGF0ZURvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwibGltaXQiLCJzdGFydEFmdGVyIiwiZGIiLCJpc0ZpcmVzdG9yZUF2YWlsYWJsZSIsInVuZGVmaW5lZCIsIk1pc3NpbmdQZXJzb25zU2VydmljZSIsImdldEFsbCIsIm9wdGlvbnMiLCJFcnJvciIsInBhZ2VMaW1pdCIsIm9mZnNldCIsInEiLCJjb2xsZWN0aW9uTmFtZSIsIm9mZnNldERvY3MiLCJkb2NzIiwibGVuZ3RoIiwibGFzdFZpc2libGUiLCJzbmFwc2hvdCIsImRhdGEiLCJtYXAiLCJpZCIsIm1ldGEiLCJ0b3RhbCIsImhhc01vcmUiLCJlcnJvciIsImNvbnNvbGUiLCJzZWFyY2giLCJzZWFyY2hUZXJtIiwicXVlcmllcyIsInRvTG93ZXJDYXNlIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJhbGxEb2NzIiwiTWFwIiwiZm9yRWFjaCIsInNldCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsInNsaWNlIiwiZ2V0QnlDYXRlZ29yeSIsImNhdGVnb3J5IiwiY3JlYXRlIiwic2VhcmNoYWJsZURhdGEiLCJzZWFyY2hhYmxlIiwibmFtZSIsImNpdHkiLCJzdGF0ZSIsImNhc2VOdW1iZXIiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiZG9jUmVmIiwidXBkYXRlIiwidXBkYXRlRGF0YSIsIlVzZXJzU2VydmljZSIsImdldEJ5RW1haWwiLCJlbWFpbCIsImVtcHR5IiwidXNlckRhdGEiLCJ0aWVyIiwiZW1haWxWZXJpZmllZCIsIkRvbmF0aW9uc1NlcnZpY2UiLCJnZXRCeVVzZXJJZCIsInVzZXJJZCIsImRvbmF0aW9ucyIsImFsbFVzZXJEb25hdGlvbnMiLCJ0b3RhbEFtb3VudCIsInJlZHVjZSIsInN1bSIsImFtb3VudCIsInBhZ2luYXRpb24iLCJzaXplIiwic3VtbWFyeSIsInRvdGFsRG9uYXRlZCIsInRvdGFsRG9uYXRpb25zIiwiZG9uYXRpb25EYXRhIiwiY3VycmVuY3kiLCJTdWJzY3JpcHRpb25zU2VydmljZSIsImdldEFjdGl2ZUJ5VXNlcklkIiwic3Vic2NyaXB0aW9uRGF0YSIsInVwZGF0ZUJ5U3RyaXBlSWQiLCJzdHJpcGVTdWJzY3JpcHRpb25JZCIsInN1YnNjcmlwdGlvbkRvYyIsIm1pc3NpbmdQZXJzb25zU2VydmljZSIsInVzZXJzU2VydmljZSIsImRvbmF0aW9uc1NlcnZpY2UiLCJzdWJzY3JpcHRpb25zU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/firestore/services.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/geocoding.ts":
/*!******************************!*\
  !*** ./src/lib/geocoding.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getCachedOrGeocodeLocation: () => (/* binding */ getCachedOrGeocodeLocation),\n/* harmony export */   loadGeocache: () => (/* binding */ loadGeocache),\n/* harmony export */   saveGeocache: () => (/* binding */ saveGeocache)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst GEOCACHE_PATH = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"geocache.json\");\nasync function loadGeocache() {\n    try {\n        const data = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(GEOCACHE_PATH, \"utf-8\");\n        return JSON.parse(data);\n    } catch (error) {\n        return {};\n    }\n}\nasync function saveGeocache(cache) {\n    try {\n        await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(GEOCACHE_PATH, JSON.stringify(cache, null, 2), \"utf-8\");\n    } catch (error) {\n        console.error(\"Failed to save geocache:\", error);\n    }\n}\nasync function geocodeLocation(city, state) {\n    try {\n        const query = encodeURIComponent(`${city}, ${state}, USA`);\n        const url = `https://nominatim.openstreetmap.org/search?q=${query}&format=json&limit=1`;\n        const response = await fetch(url, {\n            headers: {\n                \"User-Agent\": \"SaveThemNow.Jesus/1.0 (missing-persons-awareness)\"\n            }\n        });\n        if (!response.ok) {\n            return null;\n        }\n        const data = await response.json();\n        if (data && data.length > 0) {\n            return {\n                lat: parseFloat(data[0].lat),\n                lon: parseFloat(data[0].lon)\n            };\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Geocoding error:\", error);\n        return null;\n    }\n}\nasync function getCachedOrGeocodeLocation(city, state) {\n    if (!city || !state) return null;\n    const cache = await loadGeocache();\n    const cacheKey = `${city},${state}`.toLowerCase();\n    // Return cached result if available\n    if (cache[cacheKey]) {\n        return {\n            lat: cache[cacheKey].lat,\n            lon: cache[cacheKey].lon\n        };\n    }\n    // Geocode and cache the result\n    const coords = await geocodeLocation(city, state);\n    if (coords) {\n        cache[cacheKey] = {\n            ...coords,\n            timestamp: Date.now()\n        };\n        await saveGeocache(cache);\n    }\n    return coords;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dlb2NvZGluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFtQztBQUNaO0FBVXZCLE1BQU1HLGdCQUFnQkQsZ0RBQVMsQ0FBQ0csUUFBUUMsR0FBRyxJQUFJO0FBRXhDLGVBQWVDO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1QLHdDQUFFQSxDQUFDUSxRQUFRLENBQUNOLGVBQWU7UUFDOUMsT0FBT08sS0FBS0MsS0FBSyxDQUFDSDtJQUNwQixFQUFFLE9BQU9JLE9BQU87UUFDZCxPQUFPLENBQUM7SUFDVjtBQUNGO0FBRU8sZUFBZUMsYUFBYUMsS0FBZTtJQUNoRCxJQUFJO1FBQ0YsTUFBTWIsd0NBQUVBLENBQUNjLFNBQVMsQ0FBQ1osZUFBZU8sS0FBS00sU0FBUyxDQUFDRixPQUFPLE1BQU0sSUFBSTtJQUNwRSxFQUFFLE9BQU9GLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLDRCQUE0QkE7SUFDNUM7QUFDRjtBQUVPLGVBQWVNLGdCQUFnQkMsSUFBWSxFQUFFQyxLQUFhO0lBQy9ELElBQUk7UUFDRixNQUFNQyxRQUFRQyxtQkFBbUIsQ0FBQyxFQUFFSCxLQUFLLEVBQUUsRUFBRUMsTUFBTSxLQUFLLENBQUM7UUFDekQsTUFBTUcsTUFBTSxDQUFDLDZDQUE2QyxFQUFFRixNQUFNLG9CQUFvQixDQUFDO1FBRXZGLE1BQU1HLFdBQVcsTUFBTUMsTUFBTUYsS0FBSztZQUNoQ0csU0FBUztnQkFDUCxjQUFjO1lBQ2hCO1FBQ0Y7UUFFQSxJQUFJLENBQUNGLFNBQVNHLEVBQUUsRUFBRTtZQUNoQixPQUFPO1FBQ1Q7UUFFQSxNQUFNbkIsT0FBTyxNQUFNZ0IsU0FBU0ksSUFBSTtRQUVoQyxJQUFJcEIsUUFBUUEsS0FBS3FCLE1BQU0sR0FBRyxHQUFHO1lBQzNCLE9BQU87Z0JBQ0xDLEtBQUtDLFdBQVd2QixJQUFJLENBQUMsRUFBRSxDQUFDc0IsR0FBRztnQkFDM0JFLEtBQUtELFdBQVd2QixJQUFJLENBQUMsRUFBRSxDQUFDd0IsR0FBRztZQUM3QjtRQUNGO1FBRUEsT0FBTztJQUNULEVBQUUsT0FBT3BCLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLG9CQUFvQkE7UUFDbEMsT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlcUIsMkJBQTJCZCxJQUFZLEVBQUVDLEtBQWE7SUFDMUUsSUFBSSxDQUFDRCxRQUFRLENBQUNDLE9BQU8sT0FBTztJQUU1QixNQUFNTixRQUFRLE1BQU1QO0lBQ3BCLE1BQU0yQixXQUFXLENBQUMsRUFBRWYsS0FBSyxDQUFDLEVBQUVDLE1BQU0sQ0FBQyxDQUFDZSxXQUFXO0lBRS9DLG9DQUFvQztJQUNwQyxJQUFJckIsS0FBSyxDQUFDb0IsU0FBUyxFQUFFO1FBQ25CLE9BQU87WUFDTEosS0FBS2hCLEtBQUssQ0FBQ29CLFNBQVMsQ0FBQ0osR0FBRztZQUN4QkUsS0FBS2xCLEtBQUssQ0FBQ29CLFNBQVMsQ0FBQ0YsR0FBRztRQUMxQjtJQUNGO0lBRUEsK0JBQStCO0lBQy9CLE1BQU1JLFNBQVMsTUFBTWxCLGdCQUFnQkMsTUFBTUM7SUFDM0MsSUFBSWdCLFFBQVE7UUFDVnRCLEtBQUssQ0FBQ29CLFNBQVMsR0FBRztZQUNoQixHQUFHRSxNQUFNO1lBQ1RDLFdBQVdDLEtBQUtDLEdBQUc7UUFDckI7UUFDQSxNQUFNMUIsYUFBYUM7SUFDckI7SUFFQSxPQUFPc0I7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhdmV0aGVtbm93LWplc3VzLy4vc3JjL2xpYi9nZW9jb2RpbmcudHM/YTg5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcblxuZXhwb3J0IGludGVyZmFjZSBHZW9jYWNoZUVudHJ5IHtcbiAgbGF0OiBudW1iZXJcbiAgbG9uOiBudW1iZXJcbiAgdGltZXN0YW1wPzogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIEdlb2NhY2hlID0gUmVjb3JkPHN0cmluZywgR2VvY2FjaGVFbnRyeT5cblxuY29uc3QgR0VPQ0FDSEVfUEFUSCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZ2VvY2FjaGUuanNvbicpXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkR2VvY2FjaGUoKTogUHJvbWlzZTxHZW9jYWNoZT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShHRU9DQUNIRV9QQVRILCAndXRmLTgnKVxuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHt9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVHZW9jYWNoZShjYWNoZTogR2VvY2FjaGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoR0VPQ0FDSEVfUEFUSCwgSlNPTi5zdHJpbmdpZnkoY2FjaGUsIG51bGwsIDIpLCAndXRmLTgnKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGdlb2NhY2hlOicsIGVycm9yKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW9jb2RlTG9jYXRpb24oY2l0eTogc3RyaW5nLCBzdGF0ZTogc3RyaW5nKTogUHJvbWlzZTx7IGxhdDogbnVtYmVyOyBsb246IG51bWJlciB9IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGAke2NpdHl9LCAke3N0YXRlfSwgVVNBYClcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP3E9JHtxdWVyeX0mZm9ybWF0PWpzb24mbGltaXQ9MWBcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnVXNlci1BZ2VudCc6ICdTYXZlVGhlbU5vdy5KZXN1cy8xLjAgKG1pc3NpbmctcGVyc29ucy1hd2FyZW5lc3MpJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhdDogcGFyc2VGbG9hdChkYXRhWzBdLmxhdCksXG4gICAgICAgIGxvbjogcGFyc2VGbG9hdChkYXRhWzBdLmxvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0dlb2NvZGluZyBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWNoZWRPckdlb2NvZGVMb2NhdGlvbihjaXR5OiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcpOiBQcm9taXNlPHsgbGF0OiBudW1iZXI7IGxvbjogbnVtYmVyIH0gfCBudWxsPiB7XG4gIGlmICghY2l0eSB8fCAhc3RhdGUpIHJldHVybiBudWxsXG4gIFxuICBjb25zdCBjYWNoZSA9IGF3YWl0IGxvYWRHZW9jYWNoZSgpXG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7Y2l0eX0sJHtzdGF0ZX1gLnRvTG93ZXJDYXNlKClcbiAgXG4gIC8vIFJldHVybiBjYWNoZWQgcmVzdWx0IGlmIGF2YWlsYWJsZVxuICBpZiAoY2FjaGVbY2FjaGVLZXldKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdDogY2FjaGVbY2FjaGVLZXldLmxhdCxcbiAgICAgIGxvbjogY2FjaGVbY2FjaGVLZXldLmxvblxuICAgIH1cbiAgfVxuICBcbiAgLy8gR2VvY29kZSBhbmQgY2FjaGUgdGhlIHJlc3VsdFxuICBjb25zdCBjb29yZHMgPSBhd2FpdCBnZW9jb2RlTG9jYXRpb24oY2l0eSwgc3RhdGUpXG4gIGlmIChjb29yZHMpIHtcbiAgICBjYWNoZVtjYWNoZUtleV0gPSB7XG4gICAgICAuLi5jb29yZHMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9XG4gICAgYXdhaXQgc2F2ZUdlb2NhY2hlKGNhY2hlKVxuICB9XG4gIFxuICByZXR1cm4gY29vcmRzXG59Il0sIm5hbWVzIjpbInByb21pc2VzIiwiZnMiLCJwYXRoIiwiR0VPQ0FDSEVfUEFUSCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwibG9hZEdlb2NhY2hlIiwiZGF0YSIsInJlYWRGaWxlIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJzYXZlR2VvY2FjaGUiLCJjYWNoZSIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJnZW9jb2RlTG9jYXRpb24iLCJjaXR5Iiwic3RhdGUiLCJxdWVyeSIsImVuY29kZVVSSUNvbXBvbmVudCIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJqc29uIiwibGVuZ3RoIiwibGF0IiwicGFyc2VGbG9hdCIsImxvbiIsImdldENhY2hlZE9yR2VvY29kZUxvY2F0aW9uIiwiY2FjaGVLZXkiLCJ0b0xvd2VyQ2FzZSIsImNvb3JkcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/geocoding.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@firebase","vendor-chunks/@grpc","vendor-chunks/firebase","vendor-chunks/protobufjs","vendor-chunks/long","vendor-chunks/@protobufjs","vendor-chunks/lodash.camelcase","vendor-chunks/idb","vendor-chunks/csv-parse"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmissing-persons%2Froute&page=%2Fapi%2Fmissing-persons%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmissing-persons%2Froute.ts&appDir=E%3A%5CDownload%5Csavethemnow.Jesus%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDownload%5Csavethemnow.Jesus&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();