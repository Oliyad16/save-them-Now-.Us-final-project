"use strict";(()=>{var e={};e.id=207,e.ids=[207],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},85597:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>l});var n=r(49303),a=r(88716),i=r(60670),o=r(87070),c=r(92048),u=r(55315),d=r.n(u);async function l(){try{let e=new Date,t=d().join(process.cwd(),"scheduler.db"),r={running:!1,database_exists:!1,active_jobs:0,next_jobs:[],last_execution:null,statistics:{jobs_executed:0,jobs_failed:0,jobs_missed:0}};try{await c.promises.access(t),r.database_exists=!0,r={running:!1,database_exists:!0,active_jobs:6,next_jobs:[{id:"full_pipeline",name:"Full data collection pipeline",next_run:function(e){let t=new Date(new Date);return t.setDate(t.getDate()+1),t.setHours(2,0,0,0),t.toISOString()}(0),priority:1},{id:"incremental_update",name:"Incremental data updates",next_run:p(216e5),priority:2},{id:"geocoding_batch",name:"Batch geocoding for new records",next_run:p(144e5),priority:3},{id:"data_freshness_check",name:"Monitor data freshness and trigger updates",next_run:p(18e5),priority:4},{id:"urgent_case_monitor",name:"Monitor for urgent missing children cases",next_run:p(9e5),priority:5},{id:"system_health_check",name:"System health and performance monitoring",next_run:p(36e5),priority:6}],last_execution:null,statistics:{jobs_executed:0,jobs_failed:0,jobs_missed:0}}}catch(e){}let s=d().join(process.cwd(),"missing-persons.csv"),n={csv_age_hours:0,urgency_level:"normal",scheduling_recommendation:"normal"};try{let t=await c.promises.stat(s),r=(e.getTime()-t.mtime.getTime())/36e5;n={csv_age_hours:r,urgency_level:r>48?"critical":r>24?"high":"normal",scheduling_recommendation:r>48?"immediate_full":r>24?"accelerated":"normal"}}catch(e){n={csv_age_hours:1/0,urgency_level:"critical",scheduling_recommendation:"immediate_full"}}return o.NextResponse.json({timestamp:e.toISOString(),scheduler:r,data_status:n,system_readiness:{dependencies_available:!0,permissions_ok:!0,python_available:!0,configuration_valid:!0},automation_config:{full_pipeline:{schedule:"Daily at 2:00 AM",description:"Complete data collection from all sources",enabled:!0},incremental_updates:{schedule:"Every 6 hours",description:"Quick updates for changed data",enabled:!0},geocoding:{schedule:"Every 4 hours",description:"Process location coordinates",enabled:!0},freshness_monitoring:{schedule:"Every 30 minutes",description:"Monitor data age and trigger updates",enabled:!0},urgent_monitoring:{schedule:"Every 15 minutes",description:"Monitor for urgent missing children",enabled:!0},health_checks:{schedule:"Every 1 hour",description:"System performance monitoring",enabled:!0}},manual_controls:{start_scheduler:"/api/scheduler-control?action=start",stop_scheduler:"/api/scheduler-control?action=stop",trigger_immediate:"/api/trigger-update",view_logs:"/api/scheduler-logs"}})}catch(e){return console.error("Error getting scheduler status:",e),o.NextResponse.json({error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()},{status:500})}}function p(e){return new Date(new Date().getTime()+e).toISOString()}let m=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/scheduler-status/route",pathname:"/api/scheduler-status",filename:"route",bundlePath:"app/api/scheduler-status/route"},resolvedPagePath:"E:\\Download\\savethemnow.Jesus\\src\\app\\api\\scheduler-status\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:_,staticGenerationAsyncStorage:g,serverHooks:h}=m,v="/api/scheduler-status/route";function x(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(85597));module.exports=s})();