<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing Persons Awareness - United States</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1 class="title">Missing Persons Awareness</h1>
                <p class="subtitle">Helping locate missing persons across the United States</p>
                <div class="header-disclaimer">
                    <p><strong>Educational & Awareness Purpose:</strong> This site displays a subset of publicly available missing persons data for community awareness. Not all cases are represented. For emergencies or tips, contact local authorities directly.</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search by location or name..." class="search-input">
                    <button id="searchBtn" class="search-btn">Search</button>
                </div>
                <div class="filter-container">
                    <select id="categoryFilter" class="filter-select">
                        <option value="">All Categories</option>
                        <option value="Missing Adults">Missing Adults</option>
                        <option value="Missing Children">Missing Children</option>
                        <option value="Missing Veterans">Missing Veterans</option>
                    </select>
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="Cold Case">Cold Case</option>
                    </select>
                </div>
            </div>

            <div class="map-container">
                <div id="map" class="map"></div>
                <div class="map-legend">
                    <h3>Legend</h3>
                    <div class="legend-item">
                        <span class="legend-marker missing-adult"></span>
                        <span>Missing Adults</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker missing-child"></span>
                        <span>Missing Children</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker missing-veteran"></span>
                        <span>Missing Veterans</span>
                    </div>
                </div>
            </div>

            <div class="info-panel" id="infoPanel">
                <div class="info-content">
                    <h2>Missing Persons Information</h2>
                    <p>Click on a marker on the map to view detailed information about a missing person.</p>
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalCount">0</span>
                            <span class="stat-label">Displayed Cases</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="activeCount">0</span>
                            <span class="stat-label">Active Cases</span>
                        </div>
                    </div>
                    <div class="analysis-section">
                        <h3>Safety Awareness Analysis</h3>
                        <div class="analysis-tabs">
                            <button class="tab-btn active" data-tab="demographics">Demographics</button>
                            <button class="tab-btn" data-tab="locations">Hot Spots</button>
                            <button class="tab-btn" data-tab="patterns">Patterns</button>
                            <button class="tab-btn" data-tab="correlations">Correlations</button>
                            <button class="tab-btn" data-tab="risk-model">Risk Model</button>
                            <button class="tab-btn" data-tab="ai-insights">AI Insights</button>
                        </div>
                        <div class="analysis-content">
                            <div id="demographics-tab" class="tab-content active">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Age Groups at Risk</h4>
                                        <div id="ageChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Gender Distribution</h4>
                                        <div id="genderChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Ethnicity Breakdown</h4>
                                        <div id="ethnicityChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Vulnerability Score</h4>
                                        <div id="vulnerabilityScore" class="score-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                            <div id="locations-tab" class="tab-content">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Top Counties</h4>
                                        <div id="countyChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>State Distribution</h4>
                                        <div id="stateChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Risk Heat Map</h4>
                                        <div id="riskHeatMap" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Population Density Analysis</h4>
                                        <div id="densityAnalysis" class="chart-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                            <div id="patterns-tab" class="tab-content">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Temporal Patterns</h4>
                                        <div id="temporalChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Seasonal Trends</h4>
                                        <div id="seasonalChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Time-Based Risk</h4>
                                        <div id="timeRiskChart" class="chart-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Safety Insights</h4>
                                        <div id="safetyInsights" class="insights-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                            <div id="correlations-tab" class="tab-content">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Age × Location Analysis</h4>
                                        <div id="ageLocationMatrix" class="matrix-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Gender × Ethnicity Patterns</h4>
                                        <div id="genderEthnicityMatrix" class="matrix-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Time × Demographics</h4>
                                        <div id="timeDemographicMatrix" class="matrix-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Correlation Insights</h4>
                                        <div id="correlationInsights" class="insights-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                            <div id="risk-model-tab" class="tab-content">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Risk Calculator</h4>
                                        <div id="riskCalculator" class="calculator-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Vulnerability Index</h4>
                                        <div id="vulnerabilityIndex" class="index-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Predictive Model</h4>
                                        <div id="predictiveModel" class="model-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Risk Factors</h4>
                                        <div id="riskFactors" class="factors-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                            <div id="ai-insights-tab" class="tab-content">
                                <div class="analysis-grid">
                                    <div class="analysis-item">
                                        <h4>Anomaly Detection</h4>
                                        <div id="anomalyDetection" class="anomaly-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Pattern Recognition</h4>
                                        <div id="patternRecognition" class="pattern-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>AI Recommendations</h4>
                                        <div id="aiRecommendations" class="recommendations-container">Loading...</div>
                                    </div>
                                    <div class="analysis-item">
                                        <h4>Trend Forecasting</h4>
                                        <div id="trendForecasting" class="forecast-container">Loading...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="export-container">
                            <h4 style="margin-bottom: 0.75rem; color: #2c3e50; font-size: 1rem;">Export Analysis Data</h4>
                            <button class="export-btn" onclick="exportAnalysisData('json')">📄 Export as JSON</button>
                            <button class="export-btn" onclick="exportAnalysisData('csv')">📊 Export as CSV</button>
                            <button class="export-btn" onclick="exportAnalysisReport()">📋 Export Report</button>
                            <button class="export-btn" onclick="exportInsights()">💡 Export Insights</button>
                        </div>
                    </div>

                    <div class="data-disclaimer">
                        <h3>Data Sources & Important Information</h3>
                        <p><strong>National Context:</strong> According to FBI NCIC statistics, approximately 600,000 people are reported missing annually in the United States, with about 87,000-100,000 active cases at any given time.</p>
                        <p><strong>Displayed Data:</strong> The cases shown on this map represent a subset of official missing persons reports and may include data from law enforcement agencies and public databases.</p>
                        <p><strong>Data Limitations:</strong> Not all missing person cases are included in public databases. Many cases are resolved quickly and may not appear in long-term statistical reports.</p>
                        <p class="emergency-notice"><strong>Emergency:</strong> If you have information about any missing person, contact local authorities or 911 immediately. This website is for awareness purposes only.</p>
                    </div>
                </div>
            </div>
        </main>

        <div class="tip-modal" id="tipModal">
            <div class="modal-content">
                <span class="close" id="closeModal">&times;</span>
                <h2>Submit a Tip</h2>
                <form id="tipForm">
                    <div class="form-group">
                        <label for="tipName">Your Name (Optional):</label>
                        <input type="text" id="tipName" name="name">
                    </div>
                    <div class="form-group">
                        <label for="tipEmail">Your Email (Optional):</label>
                        <input type="email" id="tipEmail" name="email">
                    </div>
                    <div class="form-group">
                        <label for="tipMessage">Tip Information:</label>
                        <textarea id="tipMessage" name="message" rows="4" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Submit Tip</button>
                </form>
            </div>
        </div>

        <footer class="footer">
            <p>&copy; 2024 Missing Persons Awareness. Dedicated to helping families find their loved ones.</p>
            <p><strong>IMPORTANT:</strong> If you have information about any missing person, please contact local authorities or 911 immediately.</p>
            <p class="data-disclaimer-footer">Data shown represents a subset of available cases for educational purposes. Statistics sourced from FBI NCIC reports and public databases. Not all missing persons cases are included.</p>
        </footer>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <script src="script.js" defer></script>
</body>
</html>